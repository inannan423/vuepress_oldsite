(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{302:function(e,t,n){},343:function(e,t){},368:function(e,t,n){"use strict";n(302)},375:function(e,t,n){"use strict";n.r(t);var o=new(n(0).a),r={functional:!0,render(e,{parent:t,children:n,listeners:o}){if(t._isMounted)return o.contentReady&&o.contentReady(),n;t.$once("hook:mounted",()=>{t.$forceUpdate()})}},c=n(1),d=Object(c.a)(r,void 0,void 0,!1,null,null,null).exports;const p=n(342);var i={name:"EncryptedContent",components:{MyClientOnly:d},props:{keyName:{type:String,required:!0},owners:{type:String,required:!0},encrypted:{type:Boolean,required:!0}},data:()=>({encryptedContent:"",keyFromInput:"",decryptedComponent:""}),computed:{contentTitle:()=>"加密内容",unencryptedText:()=>"未加密内容",encryptedText:()=>"该内容已加密",decryptedText:()=>"文章已成功解密。",decryptButtonText:()=>"查看",icon(){return this.encrypted?(this.decryptedComponent,""):""}},methods:{onContentReady(){this.$nextTick(()=>{this.encrypted?this.encryptedContent=this.$refs.content.innerText.replace(/\s/g,"").replace(/\*/g,"="):o.$emit("decrypt-already")})},onConfirm(){try{var e=p.AES.decrypt(this.encryptedContent,this.keyFromInput).toString(p.enc.Utf8);this.$nextTick(()=>{const t=e.replace(/\s*/g,"");if(0==t.length||""==t)alert("密码错误"),o.$emit("decrypt-failed");else{const{component:t}=JSON.parse(e);this.decryptedComponent=t,o.$emit("decrypt-succeed")}})}catch(e){alert("密码错误"),console.log(e),o.$emit("decrypt-failed")}}}},s=(n(368),Object(c.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("MyClientOnly",{on:{contentReady:e.onContentReady}},[n("div",{staticClass:"encrypted-header"},[e.icon?n("p",{staticClass:"encrypted-icon"},[n("i",{class:e.icon})]):e._e(),e._v(" "),n("p",{staticClass:"encrypted-title"},[e._v("\n        "+e._s(e.contentTitle)+"\n      ")]),e._v(" "),e.encrypted?e.decryptedComponent?n("div",[n("p",[e._v(e._s(e.decryptedText))])]):n("div",[n("p",[e._v(e._s(e.encryptedText))]),e._v(" "),n("p",[n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.keyFromInput,expression:"keyFromInput",modifiers:{lazy:!0}}],attrs:{type:"password"},domProps:{value:e.keyFromInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onConfirm.apply(null,arguments)},change:function(t){e.keyFromInput=t.target.value}}}),e._v(" "),n("button",{on:{click:e.onConfirm}},[e._v("\n            "+e._s(e.decryptButtonText)+"\n          ")])])]):n("div",[n("p",[e._v(e._s(e.unencryptedText))])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.encrypted,expression:"!encrypted"}],ref:"content"},[e._t("default")],2),e._v(" "),e.decryptedComponent?n(e.decryptedComponent,{tag:"component"}):e._e()],1)],1)}),[],!1,null,null,null));t.default=s.exports}}]);