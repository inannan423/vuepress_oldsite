---
title: è¿è¾“å±‚
date: 2022-06-09 20:38:16
permalink: /pages/498bc0/
categories:
  - æŠ€æœ¯æ–‡æ¡£
  - è®¡ç®—æœºç½‘ç»œ
tags:
  - è®¡ç½‘
  - è®¡ç®—æœºåŸºç¡€çŸ¥è¯†
author: 
  name: Chengzihan
  link: https://github.com/inannan423/inannan423.github.io
---
<!-- ä¼ è¾“å±‚åŠŸèƒ½ï¼šæä¾›ç«¯åˆ°ç«¯çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚ç«¯æŒ‡åº”ç”¨è¿›ç¨‹ï¼Œé€šè¿‡ç«¯å£å·æ ‡è¯†ã€‚å¸¸è§åº”ç”¨ä½¿ç”¨çš„ç«¯å£å·åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå‚è§åº”ç”¨å±‚ï¼‰
ä¼ è¾“å±‚åè®®ï¼šTCPåè®®ã€UDPåè®®
TCPåè®®æŠ¥æ–‡æ ¼å¼ï¼Œæ¯ä¸ªå­—æ®µçš„å«ä¹‰
UDPåè®®æŠ¥æ–‡æ ¼å¼ï¼Œæ¯ä¸ªå­—æ®µçš„å«ä¹‰
TCP/UDPåè®®æä¾›çš„æ•°æ®ä¼ è¾“æœåŠ¡çš„ç›¸åŒç‚¹ä¸ä¸åŒç‚¹
TCPã€UDPå¸¸è§çš„åº”ç”¨åœºæ™¯
TCPè¿æ¥ç®¡ç†ï¼šä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ï¼Œå“ªäº›å­—æ®µä¸ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ç›¸å…³
æ‹¥å¡æ§åˆ¶ã€æµé‡æ§åˆ¶çš„æ¦‚å¿µï¼Œä¸TCPæŠ¥æ–‡ä¸­å“ªäº›å­—æ®µç›¸å…³ -->
## å‰è¨€ ä¼ è¾“å±‚å’Œåº”ç”¨å±‚çš„å…³ç³»

åšä¸‹é¢çš„æ¯”å–»ï¼š  
*åº”ç”¨å±‚æŠ¥æ–‡*â€”â€”å‘ä¿¡ä¿¡å°ä¸Šçš„å­—ç¬¦  
*è¿›ç¨‹*â€”â€”æ”¶ä¿¡æ–¹å’Œå‘ä¿¡æ–¹  
*ä¸»æœº*â€”â€”ä¸¤ä¸ªå®¶åº­  
*ä¼ è¾“å±‚åè®®*â€”â€”ä¸¤ä¸ªå®¶åº­ä¸“é—¨è´Ÿè´£æ”¶å‘ä¿¡çš„äºº  
*ç½‘ç»œæˆåè®®*â€”â€”é‚®æ”¿æœåŠ¡ï¼ˆé€»è¾‘é€šä¿¡æä¾›è€…ï¼‰

## ä¸€ã€ä¼ è¾“å±‚çš„åŠŸèƒ½

ä¼ è¾“å±‚ä¸ºè¿è¡Œåœ¨*ä¸åŒä¸»æœº*çš„åº”ç”¨æä¾›**é€»è¾‘é€šä¿¡**ã€‚å¯¹ç½‘ç»œå±‚çš„æœåŠ¡è¿›è¡Œå¢å¼ºï¼ˆå¦‚æ•°æ®æ’åºï¼ŒåŠ å¯†ç­‰ï¼Œ**æœ‰äº›æœåŠ¡æ˜¯ä¸å¯å¢å¼ºçš„ï¼Œå¦‚å¸¦å®½ã€å»¶è¿Ÿ**ï¼‰  
::: tip ğŸ”” ä¼ è¾“å±‚åè®®è¿è¡Œåœ¨ç«¯ç³»ç»Ÿ
å‘é€æ–¹ï¼šå°†åº”ç”¨å±‚çš„æŠ¥æ–‡*åˆ†æˆ*æŠ¥æ–‡æ®µï¼Œ**ç„¶åä¼ é€’ç»™ç½‘ç»œå±‚**ã€‚  
æ¥å—æ–¹ï¼šå°†æŠ¥æ–‡æ®µ*é‡ç»„*ä¸ºæŠ¥æ–‡ï¼Œ**ç„¶åä¼ é€’ç»™åº”ç”¨å±‚**ã€‚  
:::

## äºŒã€å¸¸è§çš„åº”ç”¨ä½¿ç”¨çš„ç«¯å£å·æ€»ç»“

åº”ç”¨ | ç«¯å£å·
:---:|:---:
HTTP | 80/8080/3128/8081/9098
FTP | 21/22
Telentï¼ˆè¿œç¨‹ç™»å½•ï¼‰ | 23
HTTPS | 443ï¼ˆTCPï¼‰ 443ï¼ˆUDPï¼‰
SMTP | 25ï¼ˆTCPï¼‰
POP3 | 110ï¼ˆTCPï¼‰
SSHï¼ˆå®‰å…¨ç™»å½•ï¼‰ | 22ï¼ˆTCPï¼‰
SOCKSï¼ˆä»£ç†æœåŠ¡å™¨ï¼‰ | 1080ï¼ˆTCPï¼‰

## ä¸‰ã€ä¼ è¾“å±‚åè®®  

### 3.1 TCPåè®®

#### 3.1.1 TCPç®€ä»‹

TCPå…¨ç§°ï¼š*ä¼ è¾“æ§åˆ¶åè®®*-**Transmission Control Protocol**ï¼Œæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„åè®®ï¼Œå®ƒæ˜¯ä¸€ä¸ª*é¢å‘è¿æ¥*çš„é€šä¿¡åè®®ã€‚TCPåè®®æ˜¯åŸºäº**IPåè®®**çš„ã€‚  
*é¢å‘è¿æ¥*ï¼š**ä¸¤ä¸ªåº”ç”¨ç¨‹åºç›¸äº’å‘æ•°æ®ä¹‹å‰å¿…é¡»å…ˆæ¡æ‰‹**ã€‚  
æä¾›*å¯é çš„æ•°æ®ä¼ è¾“ã€æ‹¥å¡æ§åˆ¶ã€æµé‡æ§åˆ¶*ã€‚  
::: tip ğŸ”” å…¨åŒå·¥
TCPæä¾›*å…¨åŒå·¥æœåŠ¡*ï¼ˆFull-duplex service) ï¼Œå½“ä¸¤ä¸ªè¿›ç¨‹Aå’ŒBå»ºç«‹èµ·TCPè¿æ¥åï¼Œé‚£ä¹ˆåº”ç”¨å±‚æ•°æ®åœ¨ä»Aæµå‘Bçš„åŒæ—¶ä¹Ÿä»Bæµå‘Aã€‚
:::
*ç‚¹å¯¹ç‚¹*ï¼šTCPæ˜¯å•ä¸ªå‘é€æ–¹å’Œå•ä¸ªæ¥æ”¶æ–¹çš„åè®®ã€‚*å¤šæ’­ï¼ˆå³ä¸€æ¬¡å‘é€å¤šä¸ªç‚¹æ¥æ”¶ï¼‰æ˜¯æ— æ³•å®ç°çš„*ã€‚  
![image.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32be5jf8sj30ns0chjt2.jpg)  

::: warning âš  ä¸¤ä¸ªå¸¸è§çš„åè¯
â‘ æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼ˆMaximum Segment Size,MSSï¼‰:è¯¥æœ¯è¯­å¾ˆå®¹æ˜“è¢«æ··æ·†ï¼Œå®ƒå…¶å®æŒ‡çš„æ˜¯æŠ¥æ–‡æ®µé‡Œåº”ç”¨æ•°æ®çš„æœ€å¤§é•¿åº¦ï¼Œè€Œä¸æ˜¯åŒ…æ‹¬TCPé¦–éƒ¨çš„TCPæŠ¥æ–‡æ®µçš„æœ€å¤§é•¿åº¦ã€‚  

â‘¡æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMaximun Transmission Unit,MTUï¼‰:æŒ‡çš„æ˜¯æœ€å¤§é“¾è·¯å±‚å¸§é•¿åº¦ï¼Œå³åº”ç”¨æ•°æ®+TCPé¦–éƒ¨+IPé¦–éƒ¨ã€‚  
:::

::: note ğŸŒ³ TCPè¿æ¥çš„ç»„æˆ
*TCPè¿æ¥çš„ç»„æˆåŒ…æ‹¬ï¼šä¸¤å°ä¸»æœºä¸Šçš„ç¼“å­˜ã€å˜é‡å’Œä¸è¿›ç¨‹ç›¸è¿çš„å¥—æ¥å­—*è€Œä¸¤å°ä¸»æœºä¹‹é—´çš„ç½‘ç»œå…ƒç´ ï¼ˆè·¯ç”±å™¨ã€äº¤æ¢æœºå’Œä¸­ç»§å™¨ï¼‰æ²¡æœ‰ä¸ºè¯¥è¿æ¥åˆ†é…ä»»ä½•å˜é‡ã€‚
:::

#### 3.1.2 TCPçš„æŠ¥æ–‡ç»“æ„

ç»“æ„åç§° | å¤§å° | ä½œç”¨
:---:|:---:|:---:
æºç«¯å£å· | 16æ¯”ç‰¹ | å­˜å‚¨å‘é€æ–¹ç«¯å£å·
ç›®æ ‡ç«¯å£å· | 16æ¯”ç‰¹ | å­˜å‚¨æ¥æ”¶æ–¹ç«¯å£å·
åºå·Seq | 32æ¯”ç‰¹ | æŠ¥æ–‡æ®µçš„é¦–å­—èŠ‚åœ¨å­—èŠ‚æµçš„ç¼–å·
ç¡®è®¤å·Ack | 32æ¯”ç‰¹ | æœŸæœ›ä»å¦ä¸€æ–¹æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·
æ¥æ”¶çª—å£ | 16æ¯”ç‰¹ | æ„¿æ„æ¥æ”¶çš„å­—èŠ‚æ•°é‡
æ ¡éªŒå’Œ | 16æ¯”ç‰¹ | æ ¡éªŒä¼ è¾“çš„æ•°æ®çš„å‡†ç¡®æ€§
åº”ç”¨å±‚æ•°æ® | é•¿åº¦ä¸ç¡®å®š | ä¼ è¾“çš„æ•°æ®  

*æºç«¯å£å·å’Œç›®æ ‡ç«¯å£å·*  
>è¢«ç”¨äºå¤šè·¯å¤ç”¨æ¥è‡ªä¸Šå±‚åº”ç”¨çš„æ•°æ®/å¤šè·¯åˆ†è§£é€åˆ°ä¸Šå±‚åº”ç”¨

*32æ¯”ç‰¹çš„åºå·å­—æ®µå’Œ32æ¯”ç‰¹çš„ç¡®è®¤å­—æ®µ*  
>è¿™äº›å­—æ®µè¢«TCPå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç”¨æ¥å®ç°å¯é æ•°æ®ä¼ è¾“æœåŠ¡ã€‚  

::: tip åºå·å­—æ®µçš„ä½œç”¨
åºå·æ˜¯**å¯é ä¼ è¾“**çš„å…³é”®å› ç´ ã€‚**TCPå°†è¦ä¼ è¾“çš„*æ¯ä¸ªå­—èŠ‚*éƒ½è¿›è¡Œäº†ç¼–å·**ï¼Œåºå·æ˜¯æœ¬æŠ¥æ–‡æ®µå‘é€çš„æ•°æ®ç»„çš„**ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·**ï¼Œåºå·å¯ä»¥ä¿è¯ä¼ è¾“ä¿¡æ¯çš„æœ‰æ•ˆæ€§ã€‚**æ¯”å¦‚ï¼šä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ä¸º300ï¼Œæ­¤æŠ¥æ–‡æ®µæ•°æ®éƒ¨åˆ†å…±æœ‰100å­—èŠ‚ï¼Œåˆ™ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ä¸º401**ã€‚  
:::

::: tip ç¡®è®¤å·å­—æ®µçš„ä½œç”¨
**æ¯ä¸€ä¸ªACKå¯¹åº”è¿™ä¸€ä¸ªç¡®è®¤å·**ï¼Œå®ƒæŒ‡æ˜**ä¸‹ä¸€ä¸ªæœŸå¾…æ”¶åˆ°çš„å­—èŠ‚åºå·**ï¼Œè¡¨æ˜è¯¥åºå·ä¹‹å‰çš„æ‰€æœ‰æ•°æ®å·²ç»**æ­£ç¡®æ— è¯¯çš„æ”¶åˆ°**ã€‚*ç¡®è®¤å·åªæœ‰å½“ACKæ ‡å¿—ä¸º1æ—¶æ‰æœ‰æ•ˆ*ã€‚æ¯”å¦‚å»ºç«‹è¿æ¥æ—¶ï¼ŒSYNæŠ¥æ–‡çš„ACKæ ‡å¿—ä½ä¸º0ã€‚
:::

*16æ¯”ç‰¹æ¥æ”¶çª—å£å­—æ®µ*  
>è¯¥å­—æ®µç”¨äºæŒ‡ç¤ºæ¥æ”¶æ–¹æ„¿æ„æ¥æ”¶çš„å­—èŠ‚æ•°é‡ï¼Œç”¨äºæµé‡æ§åˆ¶  

*4æ¯”ç‰¹çš„é¦–éƒ¨é•¿åº¦å­—æ®µ*
>æŒ‡ç¤ºä»¥32æ¯”ç‰¹çš„å­—ä¸ºå•ä½çš„TCPé¦–éƒ¨é•¿åº¦ï¼Œè¡¨ç¤ºè¯¥TCPå¤´éƒ¨æœ‰å¤šå°‘ä¸ª32ä½bit(**æœ‰å¤šå°‘ä¸ª4å­—èŠ‚**)ï¼Œæ‰€ä»¥TCPå¤´éƒ¨å¤§é•¿åº¦æ˜¯15 * 4 = 60ã€‚æ ¹æ®è¯¥éƒ¨åˆ†å¯ä»¥å°†TCPæŠ¥å¤´å’Œæœ‰æ•ˆè½½è·åˆ†ç¦»ã€‚**TCPæŠ¥æ–‡é»˜è®¤å¤§å°ä¸º20ä¸ªå­—èŠ‚**ã€‚  

*å¯é€‰ä¸å˜é•¿çš„é€‰é¡¹å­—æ®µ*  
>è¯¥å­—æ®µç”¨äºå‘é€æ–¹ä¸æ¥æ”¶æ–¹åè°ƒæœ€å¤§æŠ¥æ–‡é•¿åº¦ï¼ˆMSSï¼‰æ—¶ï¼Œæˆ–åœ¨é«˜é€Ÿç½‘ç»œç¯å¢ƒä¸‹ç”¨ä½œçª—å£è°ƒèŠ‚å› å­æ—¶ä½¿ç”¨ã€‚  

*6æ¯”ç‰¹çš„æ ‡å¿—å­—æ®µ*  
>ACKï¼ˆç¡®è®¤åé¦ˆï¼‰ï¼ŒRSTã€SYNã€FINï¼ˆç”¨äºè¿æ¥çš„å»ºç«‹å’Œæ‹†é™¤ï¼‰ï¼Œã€PSHï¼ˆæŒ‡ç¤ºæ¥æ”¶æ–¹åº”ç«‹å³å°†æ•°æ®äº¤ç»™ä¸Šå±‚ï¼‰ï¼ŒURGï¼ˆæŠ¥æ–‡é‡Œå­˜åœ¨ç€è¢«å‘é€ç«¯ä¸Šå±‚è®¾ä¸ºç´§æ€¥çš„æ•°æ®ï¼Œç´§æ€¥æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚ç”±ä¸€ä¸ª16æ¯”ç‰¹çš„ç´§æ€¥æ•°æ®æŒ‡é’ˆæŒ‡å‡ºï¼‰ã€‘åœ¨å®è·µä¸­ï¼ŒPSHå’ŒURGå¹¶æ²¡æœ‰ä½¿ç”¨ã€‚  
::: tip
URG:å®ƒä¸ºäº†æ ‡å¿—ç´§æ€¥æŒ‡é’ˆæ˜¯å¦æœ‰æ•ˆã€‚  
ACKï¼šæ ‡è¯†ç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆã€‚  
PSH:æç¤ºæ¥æ”¶ç«¯åº”ç”¨ç¨‹åºç«‹å³å°†æ¥æ”¶ç¼“å†²åŒºçš„æ•°æ®æ‹¿èµ°ã€‚  
RSTï¼šå®ƒæ˜¯ä¸ºäº†å¤„ç†å¼‚å¸¸è¿æ¥çš„ï¼Œ å‘Šè¯‰è¿æ¥ä¸ä¸€è‡´çš„ä¸€æ–¹ï¼Œæˆ‘ä»¬çš„è¿æ¥è¿˜æ²¡æœ‰å»ºç«‹å¥½ï¼Œ è¦æ±‚å¯¹æ–¹é‡æ–°å»ºç«‹è¿æ¥ã€‚æˆ‘ä»¬æŠŠæºå¸¦RSTæ ‡è¯†çš„ç§°ä¸ºå¤ä½æŠ¥æ–‡æ®µã€‚  
SYN: è¯·æ±‚å»ºç«‹è¿æ¥; æˆ‘ä»¬æŠŠæºå¸¦SYNæ ‡è¯†çš„ç§°ä¸ºåŒæ­¥æŠ¥æ–‡æ®µã€‚  
FIN:é€šçŸ¥å¯¹æ–¹, æœ¬ç«¯è¦å…³é—­è¿æ¥äº†, æˆ‘ä»¬ç§°æºå¸¦FINæ ‡è¯†çš„ä¸ºç»“æŸæŠ¥æ–‡æ®µã€‚  
:::

*16ä½çš„ç´§æ€¥æŒ‡é’ˆ*  
>æŒ‰åºåˆ°è¾¾æ˜¯TCPåè®®ä¿è¯å¯é æ€§çš„ä¸€ç§æœºåˆ¶ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›æŠ¥æ–‡æƒ³**ä¼˜å…ˆè¢«å¤„ç†**ï¼Œè¿™æ—¶å°±å¯ä»¥è®¾ç½®ç´§æ€¥æŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥æŠ¥æ–‡å³å¯ï¼ŒåŒæ—¶å°†ç´§æ€¥æŒ‡é’ˆæœ‰æ•ˆä½ç½®ä½1ã€‚  

*16ä½æ ¡éªŒå’Œ*  
>å‘é€ç«¯å¡«å……ï¼ŒCRCæ ¡éªŒã€‚å¦‚æœæ¥æ”¶ç«¯æ ¡éªŒä¸é€šè¿‡ï¼Œ åˆ™è®¤ä¸ºæ•°æ®æœ‰é—®é¢˜(æ­¤å¤„çš„æ£€éªŒå’Œä¸å…‰åŒ…å«TCPé¦–éƒ¨ä¹ŸåŒ…å«TCPæ•°æ®éƒ¨åˆ†)ã€‚

![image.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32brs41v5j30s80iy406.jpg)  
::: details è‹±æ–‡è¯¦å›¾
![image.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32bt2e6k9j30go07xt9s.jpg)
:::

#### 3.1.3 TCPç‰¹æ€§è§£è¯»

*1.å¯é æ•°æ®ä¼ è¾“*  
>TCPåœ¨IPæä¾›çš„ä¸å¯é æœåŠ¡çš„åŸºç¡€ä¸Šå»ºç«‹äº†rdtã€‚æä¾›äº†ç´¯è®¡ç¡®è®¤å’Œè¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚å…è®¸ä¹±åºæ¥æ”¶ã€‚  

*2.æµé‡æ§åˆ¶*  
>ç¼“å†²åŒºï¼š*TCPå¾€é‡Œé¢å†™æ•°æ®ï¼Œappä»é‡Œé¢è¯»æ•°æ®*ã€‚æ¥æ”¶æ–¹æ§åˆ¶å‘é€æ–¹ï¼Œ**ä¸è®©å‘é€æ–¹å‘é€çš„å¤ªå¤šã€å¤ªå¿«**ï¼Œä»¥è‡´äºè®©æ¥æ”¶æ–¹çš„ç¼“å†²åŒºæº¢å‡ºã€‚æ¥æ”¶æ–¹åœ¨å…¶å‘å‘é€æ–¹çš„TCPæŠ¥æ–‡æ®µå¤´éƒ¨çš„rwndå­—æ®µâ€œé€šå‘Šâ€å…¶ç©ºé—²ç¼“å­˜åŒºå¤§å°ã€‚å‘é€æ–¹æ ¹æ®rwndå­—æ®µæ§åˆ¶å‘é€æ•°æ®çš„å¤§å°ï¼Œä¿è¯æ¥æ”¶æ–¹ä¸ä¼šè¢«æ·¹æ²¡ã€‚

*3.è¿æ¥æ§åˆ¶*  
>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ã€‚è¯¦è§ä¸‹ä¸€ç¯‡æ–‡ç« ã€‚  

***

### 3.2 UDPåè®®

### 3.2.1 UDPåè®®ç®€ä»‹

å…¨ç§°ï¼š*ç”¨æˆ·æ•°æ®æŠ¥åè®®-User Datagram Protocol*ï¼Œç®€ç§°UDPï¼Œæ˜¯ä¸€ç§æ— è¿æ¥çš„æ•°æ®ä¼ è¾“åè®®ã€‚  
*æ— è¿æ¥*ï¼šUDPå‘é€ç«¯å’Œæ¥æ”¶ç«¯*æ²¡æœ‰æ¡æ‰‹*ï¼›*æ¯ä¸ªUDPæŠ¥æ–‡æ®µéƒ½è¢«ç‹¬ç«‹çš„å¤„ç†*ã€‚  
*ä¼˜ç‚¹*ï¼šä¼ è¾“**é€Ÿåº¦å¿«**ï¼ˆæ— éœ€æ¡æ‰‹ã€æ— æ‹¥å¡å’Œæµé‡æ§åˆ¶ï¼‰ã€å¼€é”€å°ï¼ˆæŠ¥æ–‡æ®µçš„å¤´éƒ¨å¾ˆå°ï¼‰  
*ç¼ºç‚¹*ï¼šå¯èƒ½ä¸¢å¤±ã€å¯èƒ½**ä¹±åº**  
*åº”ç”¨*ï¼šæµåª’ä½“ï¼ˆè¦æ±‚é€Ÿç‡ï¼Œå¯¹ä¸¢å¤±ä¸æ•æ„Ÿï¼‰ã€DNS  

### 3.2.2 UDPæŠ¥æ–‡æ ¼å¼

![image.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32tjunjb7j30ym0cuwir.jpg)  
*UDPé¦–éƒ¨ç”±8ä¸ªå­—èŠ‚æ„æˆï¼Œæ¯ä¸ªå­—æ®µéƒ½æ˜¯ä¸¤ä¸ªå­—èŠ‚*  
>1ã€æºç«¯å£ï¼šæºç«¯å£å·ï¼Œéœ€è¦å¯¹æ–¹å›ä¿¡æ—¶é€‰ç”¨ï¼Œä¸éœ€è¦æ—¶ç½®0ï¼›  
>2ã€ç›®æ ‡ç«¯å£ï¼šç›®çš„ç«¯å£å·ï¼Œåœ¨ç»ˆç‚¹äº¤ä»˜æŠ¥æ–‡æ—¶éœ€è¦ç”¨åˆ°ï¼›  
>3ã€å¤´éƒ¨é•¿åº¦ï¼šUDPçš„æ•°æ®æŠ¥é•¿åº¦ï¼ˆåŒ…å«é¦–éƒ¨å’Œæ•°æ®ï¼‰ï¼Œæœ€å°å€¼ä¸º8å­—èŠ‚ï¼ˆåªæœ‰é¦–éƒ¨ï¼‰ï¼›  
>4ã€æ ¡éªŒå’Œï¼šæ£€æµ‹UDPæ•°æ®åœ¨ä¼ è¾“ä¸­æ˜¯å¦å‡ºé”™ï¼Œ**æœ‰é”™åˆ™ä¸¢å¼ƒ**ã€‚  

::: tip ğŸ”” UDPæ ¡éªŒ
è¯¥å­—æ®µå¯é€‰ï¼Œ**å½“æºä¸»æœºä¸æƒ³è®¡ç®—æ ¡éªŒå’Œï¼Œåˆ™ç½®0**ï¼Œå½“ä¼ è¾“å±‚ä»IPå±‚æ”¶åˆ°UDPæ•°æ®æŠ¥æ—¶ï¼Œæ ¹æ®é¦–éƒ¨ä¸­çš„ç›®æ ‡ç«¯å£ï¼ŒæŠŠUDPæ•°æ®é€šè¿‡ç›¸åº”çš„ç«¯å£äº¤ç»™åº”ç”¨è¿›ç¨‹ã€‚*è‹¥æ¥æ”¶æ–¹UDPå‘ç°æ”¶åˆ°çš„æŠ¥æ–‡ä¸­ç›®çš„ç«¯å£å·ä¸æ­£ç¡®ï¼Œå°±ä¸¢å¼ƒè¯¥æŠ¥æ–‡*ï¼Œç”±ICMPå‘é€â€œ*ç«¯å£ä¸å¯è¾¾*â€æŠ¥é”™ç»™å‘é€æ–¹ã€‚  

åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œ*åœ¨UDPæ•°æ®æŠ¥å‰åŠ 12å­—èŠ‚çš„ä¼ªé¦–éƒ¨*ï¼Œå¹¶ä¸æ˜¯UDPçœŸæ­£çš„é¦–éƒ¨ã€‚**åªæ˜¯åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ä¸´æ—¶æ·»åŠ åœ¨UDPæ•°æ®æŠ¥çš„å‰é¢å¾—åˆ°çš„ä¸´æ—¶æ•°æ®æŠ¥**ï¼Œåæ ¡éªŒä¸´æ—¶æ•°æ®æŠ¥ã€‚**ä¼ªé¦–éƒ¨æ—¢ä¸å‘ä¸‹ä¼ é€ï¼Œä¹Ÿä¸å‘ä¸Šé€’äº¤ï¼Œä»…ä»…ä¸ºäº†è®¡ç®—æ ¡éªŒå’Œ**ã€‚è¿™æ ·ï¼Œå³æ£€æŸ¥äº†UDPçš„æ•°æ®æŠ¥ï¼Œåˆå¯¹IPæ•°æ®æŠ¥æºIPåœ°å€å’Œç›®æ ‡åœ°å€è¿›è¡Œäº†æ ¡éªŒã€‚  
:::  

::: details UDPæ•°æ®æŠ¥æ ¼å¼å’Œä¼ªé¦–éƒ¨å›¾è§£
![image.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32uq85ppzj30v40ojakj.jpg)  
:::

## å››ã€æ‹¥å¡æ§åˆ¶

*æ‹¥å¡*ï¼šå¤§å¤šæ•°æ•°æ®éœ€è¦ä¼ è¾“ï¼Œè¶…è¿‡äº†ç½‘ç»œçš„å¤„ç†èƒ½åŠ›ã€‚  
*æ‹¥å¡çš„è¡¨ç°*ï¼šåˆ†ç»„ä¸¢å¤±ï¼ˆè·¯ç”±å™¨ç¼“å†²åŒºæº¢å‡ºï¼‰ã€åˆ†ç»„å»¶è¿Ÿï¼ˆåœ¨è·¯ç”±å™¨ä¸­çš„æ’é˜Ÿå»¶è¿Ÿï¼‰  

### 4.1 TCPæ‹¥å¡æ§åˆ¶

::: note ğŸŒ³ åŸºæœ¬åŸç†
*è·¯ç”±å™¨ä¸å‘ä¸»æœºå‘é€æ‹¥å¡ç›¸å…³çš„åé¦ˆä¿¡æ¯*ï¼ˆè·¯ç”±å™¨çš„è´Ÿæ‹…è¾ƒè½»ã€ç¬¦åˆç½‘ç»œæ ¸å¿ƒç®€å•çš„TCP/IPæ¶æ„åŸåˆ™ï¼‰  
**ç«¯ç³»ç»Ÿæ ¹æ®è‡ªèº«å¾—åˆ°çš„æ¶ˆæ¯ï¼Œåˆ¤æ–­æ˜¯å¦å‘ç”Ÿæ‹¥å¡ï¼Œä»è€Œé‡‡å–åŠ¨ä½œ**  
:::

**æ‹¥å¡ç›‘æµ‹çš„æ–¹å¼**  

>æŸä¸ªæ®µè¶…æ—¶äº†ï¼ˆä¸¢å¤±äº‹ä»¶ï¼‰ï¼šæ‹¥å¡  
>è¶…æ—¶æ—¶é—´åˆ°ï¼ŒæŸä¸ªæ®µçš„ç¡®è®¤æ²¡æœ‰æ¥ã€‚  
>åŸå› 1ï¼šç½‘ç»œæ‹¥å¡ï¼ˆæŸä¸ªè·¯ç”±å™¨ç¼“å†²åŒºæ²¡ç©ºé—´äº†ï¼Œè¢«ä¸¢å¼ƒï¼‰å¤§æ¦‚ç‡  
>åŸå› 2ï¼šå‡ºé”™è¢«ä¸¢å¼ƒäº†ï¼ˆå„çº§é”™è¯¯ï¼Œæ²¡æœ‰é€šè¿‡æ ¡éªŒï¼Œè¢«ä¸¢å¼ƒï¼‰å°æ¦‚ç‡  
>*ä¸€æ—¦è¶…æ—¶ï¼Œå°±è®¤ä¸ºå‘ç”Ÿäº†æ‹¥å¡ï¼Œæœ‰ä¸€å®šè¯¯åˆ¤ï¼Œä½†æ˜¯æ€»ä½“æ§åˆ¶æ–¹å‘æ˜¯å¯¹çš„*  

## äº”ã€TCPå’ŒUDPçš„å¼‚åŒ

**ç›¸åŒç‚¹**ï¼šTCPå’ŒUDPéƒ½æ˜¯åœ¨ç½‘ç»œå±‚ï¼Œéƒ½æ˜¯ä¼ è¾“å±‚åè®®ï¼Œéƒ½èƒ½éƒ½æ˜¯ä¿æŠ¤ç½‘ç»œå±‚çš„ä¼ è¾“ï¼ŒåŒæ–¹çš„é€šä¿¡éƒ½éœ€è¦å¼€æ”¾ç«¯å£ã€‚  

**ä¸åŒç‚¹**:
\ | **TCP** | **UDP**
:---: | :---: | :---:
1 | TCPçš„ä¼ è¾“æ˜¯*å¯é ä¼ è¾“*ã€‚ |  UDPçš„ä¼ è¾“æ˜¯*ä¸å¯é ä¼ è¾“*ã€‚
2 | TCPæ˜¯*åŸºäºè¿æ¥çš„åè®®*ï¼Œåœ¨æ­£å¼æ”¶å‘æ•°æ®å‰ï¼Œå¿…é¡»å’Œå¯¹æ–¹å»ºç«‹å¯é çš„è¿æ¥ã€‚ |  UDPæ˜¯å’ŒTCPç›¸å¯¹åº”çš„åè®®ï¼Œå®ƒæ˜¯é¢å‘*éè¿æ¥çš„åè®®*ï¼Œå®ƒä¸ä¸å¯¹æ–¹å»ºç«‹è¿æ¥ï¼Œè€Œæ˜¯*ç›´æ¥æŠŠæ•°æ®åŒ…å‘é€å‡ºå»*
3 | TCPæ˜¯ä¸€ç§*å¯é çš„é€šä¿¡æœåŠ¡ï¼Œè´Ÿè½½ç›¸å¯¹è€Œè¨€æ¯”è¾ƒå¤§*ï¼ŒTCPé‡‡ç”¨å¥—æ¥å­—ï¼ˆsocketï¼‰æˆ–è€…ç«¯å£ï¼ˆportï¼‰æ¥å»ºç«‹é€šä¿¡ã€‚ | UDPæ˜¯ä¸€ç§*ä¸å¯é çš„ç½‘ç»œæœåŠ¡ï¼Œè´Ÿè½½æ¯”è¾ƒ*å°ã€‚
4 | *TCPå’ŒUDPç»“æ„ä¸åŒ*ï¼ŒTCPåŒ…æ‹¬åºå·ã€ç¡®è®¤ä¿¡å·ã€æ•°æ®åç§»ã€æ§åˆ¶æ ‡å¿—ï¼ˆé€šå¸¸è¯´çš„URGã€ACKã€PSHã€RSTã€SYNã€FINï¼‰ã€çª—å£ã€æ ¡éªŒå’Œã€ç´§æ€¥æŒ‡é’ˆã€é€‰é¡¹ç­‰ä¿¡æ¯ã€‚ |  UDPåŒ…å«é•¿åº¦å’Œæ ¡éªŒå’Œä¿¡æ¯ã€‚
5 | TCPæä¾›è¶…æ—¶é‡å‘ï¼Œä¸¢å¼ƒé‡å¤æ•°æ®ï¼Œæ£€éªŒæ•°æ®ï¼Œæµé‡æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œ*ä¿è¯æ•°æ®èƒ½ä»ä¸€ç«¯ä¼ åˆ°å¦ä¸€ç«¯*ã€‚ |  UDPä¸æä¾›å¯é æ€§ï¼Œå®ƒåªæ˜¯æŠŠåº”ç”¨ç¨‹åºä¼ ç»™IPå±‚çš„æ•°æ®æŠ¥å‘é€å‡ºå»ï¼Œ*ä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯å®ƒä»¬èƒ½åˆ°è¾¾ç›®çš„åœ°*ã€‚
6 | TCPåœ¨å‘é€æ•°æ®åŒ…å‰åœ¨é€šä¿¡åŒæ–¹æœ‰ä¸€ä¸ª*ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼Œç¡®ä¿åŒæ–¹å‡†å¤‡å¥½*ï¼Œåœ¨ä¼ è¾“æ•°æ®åŒ…æœŸé—´ï¼ŒTCPä¼šæ ¹æ®é“¾è·¯ä¸­æ•°æ®æµé‡çš„å¤§å°æ¥è°ƒèŠ‚ä¼ é€çš„é€Ÿç‡ï¼Œä¼ è¾“æ—¶å¦‚æœå‘ç°æœ‰ä¸¢åŒ…ï¼Œä¼šæœ‰ä¸¥æ ¼çš„é‡ä¼ æœºåˆ¶ï¼Œæ•…è€Œä¼ è¾“é€Ÿåº¦å¾ˆæ…¢ã€‚ |  UDPåœ¨ä¼ è¾“æ•°æ®æŠ¥å‰ä¸ç”¨åœ¨å®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œä¸”*æ²¡æœ‰è¶…æ—¶é‡å‘ç­‰æœºåˆ¶ï¼Œæ•…è€Œä¼ è¾“é€Ÿåº¦å¾ˆå¿«*ã€‚
7 | *TCPæ”¯æŒå…¨åŒå·¥å’Œå¹¶å‘çš„TCPè¿æ¥*ï¼Œæä¾›ç¡®è®¤ã€é‡ä¼ ä¸æ‹¥å¡æ§åˆ¶ã€‚ |  UDPé€‚ç”¨äºå“ªäº›ç³»ç»Ÿ*å¯¹æ€§èƒ½çš„è¦æ±‚é«˜äºæ•°æ®å®Œæ•´æ€§çš„è¦æ±‚*ï¼Œéœ€è¦â€œç®€çŸ­å¿«æ·â€çš„æ•°æ®äº¤æ¢ã€éœ€è¦å¤šæ’­å’Œå¹¿æ’­çš„åº”ç”¨ç¯å¢ƒã€‚

## å…­ã€å¤šè·¯å¤ç”¨å’Œåˆ†ç”¨

>ç”±äºä¸€ä¸ªä¸»æœºä¸Šæœ‰å¤šä¸ªè¿›ç¨‹ï¼Œå› æ­¤è¦è¿›è¡Œå¤šè·¯å¤ç”¨å’Œåˆ†ç”¨ã€‚å¦‚æœæŸå±‚çš„ä¸€ä¸ªåè®®å¯¹åº”ä¸Šå±‚çš„å¤šä¸ªåè®®/å®ä½“ï¼Œå°±éœ€è¦è¿›è¡Œæœç”¨/åˆ†ç”¨ã€‚  

::: tip ğŸ”” æ¥æ”¶ç«¯è¿›è¡Œå¤šè·¯åˆ†ç”¨
ä¼ è¾“å±‚æ ¹æ®å¤´éƒ¨ä¿¡æ¯å°†æ”¶åˆ°çš„æŠ¥æ–‡äº¤ç»™æ­£ç¡®çš„Socketï¼ˆå³ä¸åŒçš„è¿›ç¨‹ï¼‰ã€‚
:::

::: tip ğŸ”” å‘é€ç«¯è¿›è¡Œå¤šè·¯å¤ç”¨
ä»å¤šä¸ªSocketæ¥æ”¶æ•°æ®ï¼Œä¸ºæ¯ä¸ªæ•°æ®å°è£…å¤´éƒ¨ä¿¡æ¯ï¼Œç”ŸæˆæŠ¥æ–‡ï¼Œäº¤ç»™ç½‘ç»œå±‚ã€‚
:::

*åˆ†ç”¨*ï¼š  

ä¸»æœºæ¥æ”¶åˆ°IPæ•°æ®æŠ¥(datagram)  
>æ¯ä¸ªæ•°æ®æŠ¥æºå¸¦æºIPåœ°å€ã€ç›®çš„IPåœ°å€  
>æ¯ä¸ªæ•°æ®æŠ¥æºå¸¦ä¸€ä¸ªä¼ è¾“å±‚çš„æ®µ(Segmentï¼‰  
>æ¯ä¸ªæ®µæºå¸¦æºç«¯å£å·å’Œç›®çš„ç«¯å£å·  

ä¸»æœºæ”¶åˆ°Segmentä¹‹åï¼Œä¼ è¾“å±‚åè®®æå–IPåœ°å€å’Œç«¯å£å·ä¿¡æ¯ï¼Œå°†Segmentå¯¼å‘ç›¸åº”çš„Socket  
>TCPåšæ›´å¤šå¤„ç†  

![image.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h33ht0kf8ij30f308pjvt.jpg)  
[å¤ç”¨å’Œåˆ†ç”¨](https://www.cnblogs.com/s1mmons/p/15792624.html)
