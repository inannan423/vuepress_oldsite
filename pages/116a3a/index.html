<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络层 | JetZihan</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.jpg">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <meta name="description" content="czh的个人学习文档">
    <meta name="Cheng" content="chengs blog">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.f6a70fa5.css" as="style"><link rel="preload" href="/assets/js/app.5066a133.js" as="script"><link rel="preload" href="/assets/js/2.ae42d6f2.js" as="script"><link rel="preload" href="/assets/js/61.85ea6254.js" as="script"><link rel="preload" href="/assets/js/10.eb81c37d.js" as="script"><link rel="prefetch" href="/assets/js/11.374b8b0c.js"><link rel="prefetch" href="/assets/js/12.1cbe13e4.js"><link rel="prefetch" href="/assets/js/13.18ea857b.js"><link rel="prefetch" href="/assets/js/14.3a91e5e8.js"><link rel="prefetch" href="/assets/js/15.d881ca26.js"><link rel="prefetch" href="/assets/js/16.b53af45c.js"><link rel="prefetch" href="/assets/js/17.935fe5e2.js"><link rel="prefetch" href="/assets/js/18.34be8f8a.js"><link rel="prefetch" href="/assets/js/19.0c368c1f.js"><link rel="prefetch" href="/assets/js/20.0331c8de.js"><link rel="prefetch" href="/assets/js/21.10cc1f43.js"><link rel="prefetch" href="/assets/js/22.1d8bb932.js"><link rel="prefetch" href="/assets/js/23.ed527eda.js"><link rel="prefetch" href="/assets/js/24.a25dd448.js"><link rel="prefetch" href="/assets/js/25.256f02d3.js"><link rel="prefetch" href="/assets/js/26.40ba99b4.js"><link rel="prefetch" href="/assets/js/27.ad6969ad.js"><link rel="prefetch" href="/assets/js/28.bedaddcf.js"><link rel="prefetch" href="/assets/js/29.3eb9d749.js"><link rel="prefetch" href="/assets/js/3.31501994.js"><link rel="prefetch" href="/assets/js/30.d59316ec.js"><link rel="prefetch" href="/assets/js/31.464af5e4.js"><link rel="prefetch" href="/assets/js/32.82f954ff.js"><link rel="prefetch" href="/assets/js/33.9cd5d2ae.js"><link rel="prefetch" href="/assets/js/34.4c11c978.js"><link rel="prefetch" href="/assets/js/35.956f97df.js"><link rel="prefetch" href="/assets/js/36.8a10bea4.js"><link rel="prefetch" href="/assets/js/37.0e7c47ab.js"><link rel="prefetch" href="/assets/js/38.5689405b.js"><link rel="prefetch" href="/assets/js/39.ad005409.js"><link rel="prefetch" href="/assets/js/4.0babbda4.js"><link rel="prefetch" href="/assets/js/40.542d197a.js"><link rel="prefetch" href="/assets/js/41.d1927791.js"><link rel="prefetch" href="/assets/js/42.f382404e.js"><link rel="prefetch" href="/assets/js/43.bcddd155.js"><link rel="prefetch" href="/assets/js/44.e707eaaa.js"><link rel="prefetch" href="/assets/js/45.20879e84.js"><link rel="prefetch" href="/assets/js/46.02673d11.js"><link rel="prefetch" href="/assets/js/47.3968540e.js"><link rel="prefetch" href="/assets/js/48.5134a543.js"><link rel="prefetch" href="/assets/js/49.c31082d8.js"><link rel="prefetch" href="/assets/js/5.81f3e40e.js"><link rel="prefetch" href="/assets/js/50.416654ad.js"><link rel="prefetch" href="/assets/js/51.8dd030c3.js"><link rel="prefetch" href="/assets/js/52.699da312.js"><link rel="prefetch" href="/assets/js/53.d6b2aa82.js"><link rel="prefetch" href="/assets/js/54.25bd7446.js"><link rel="prefetch" href="/assets/js/55.7328e80e.js"><link rel="prefetch" href="/assets/js/56.533429c0.js"><link rel="prefetch" href="/assets/js/57.ee541292.js"><link rel="prefetch" href="/assets/js/58.351db8e3.js"><link rel="prefetch" href="/assets/js/59.6a8a4b51.js"><link rel="prefetch" href="/assets/js/6.615866e5.js"><link rel="prefetch" href="/assets/js/60.92c5ecdd.js"><link rel="prefetch" href="/assets/js/62.1b5ae952.js"><link rel="prefetch" href="/assets/js/63.b4ec1189.js"><link rel="prefetch" href="/assets/js/64.7cc52d33.js"><link rel="prefetch" href="/assets/js/65.bc549590.js"><link rel="prefetch" href="/assets/js/66.91657d50.js"><link rel="prefetch" href="/assets/js/67.c405dc05.js"><link rel="prefetch" href="/assets/js/7.699799fd.js"><link rel="prefetch" href="/assets/js/8.d5b4f0f9.js"><link rel="prefetch" href="/assets/js/9.1d701629.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f6a70fa5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="JetZihan" class="logo"> <span class="site-name can-hide">JetZihan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/web/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/front/" class="nav-link">Front-End</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><a href="/archives/" class="link-title">Menu</a> <span class="title" style="display:none;">Menu</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><!----> <span class="title" style="display:;">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Leetcode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3school.com.cn/js/index.asp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3cschool.cn/css3/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSS3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3school.com.cn/python/index.asp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zq99299.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://markdown.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3cschool.cn/mysql/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MySql
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docusaurus.io/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docusaurus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WxMiniProgram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://krpano.milly.me/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Krpano
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bjfuacm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BJFUoj
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/inannan423/inannan423.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/web/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/front/" class="nav-link">Front-End</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Menu" class="dropdown-title"><a href="/archives/" class="link-title">Menu</a> <span class="title" style="display:none;">Menu</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Links" class="dropdown-title"><!----> <span class="title" style="display:;">Links</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://leetcode-cn.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Leetcode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3school.com.cn/js/index.asp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3cschool.cn/css3/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSS3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3school.com.cn/python/index.asp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zq99299.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://markdown.com.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.w3cschool.cn/mysql/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MySql
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docusaurus.io/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docusaurus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WxMiniProgram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  React
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://krpano.milly.me/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Krpano
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bjfuacm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  BJFUoj
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/inannan423/inannan423.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>随想随写</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数字媒体技术基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/a60a41/" class="sidebar-link">TCP/IP分层图</a></li><li><a href="/pages/a60a43/" class="sidebar-link">中英文概念</a></li><li><a href="/pages/04c345/" class="sidebar-link">网络分类和分层架构</a></li><li><a href="/pages/98f79b/" class="sidebar-link">基础知识</a></li><li><a href="/pages/88e6c9/" class="sidebar-link">应用层</a></li><li><a href="/pages/b7b82d/" class="sidebar-link">应用层-DNS</a></li><li><a href="/pages/498bc0/" class="sidebar-link">运输层</a></li><li><a href="/pages/b0fced/" class="sidebar-link">运输层-可靠数据传输(rdt)</a></li><li><a href="/pages/39f7b8/" class="sidebar-link">运输层-TCP连接建立过程</a></li><li><a href="/pages/116a3a/" aria-current="page" class="active sidebar-link">网络层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#一、网络层简介" class="sidebar-link">一、网络层简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_1-1-数据链路层和网络层的区别" class="sidebar-link">1.1 数据链路层和网络层的区别</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_1-2-网络互连使用的设备" class="sidebar-link">1.2 网络互连使用的设备</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_1-3-网络层的作用" class="sidebar-link">1.3 网络层的作用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#二、ip协议" class="sidebar-link">二、IP协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-1-ip协议格式" class="sidebar-link">2.1 IP协议格式</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-2-ip数据报的分片-fragmented" class="sidebar-link">2.2 IP数据报的分片（Fragmented）</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-3-ip编址" class="sidebar-link">2.3 IP编址</a></li><li class="sidebar-sub-header level4"><a href="/pages/116a3a/#_2-3-1-ip子网" class="sidebar-link">2.3.1 IP子网</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-4-ip地址分类" class="sidebar-link">2.4 IP地址分类</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-5-特殊地址-广播地址、环回地址" class="sidebar-link">2.5 特殊地址（广播地址、环回地址）</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-6-子网划分" class="sidebar-link">2.6 子网划分</a></li><li class="sidebar-sub-header level4"><a href="/pages/116a3a/#_2-6-1-子网掩码" class="sidebar-link">2.6.1 子网掩码</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-7-环回地址" class="sidebar-link">2.7 环回地址</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-8-ipv6" class="sidebar-link">2.8 IPv6</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_2-9-ipv4-32位-和ipv6-128位-对比" class="sidebar-link">2.9 IPv4（32位）和IPv6（128位）对比</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#三、网络地址转换-nat" class="sidebar-link">三、网络地址转换 NAT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_3-1-网络地址转换的含义" class="sidebar-link">3.1 网络地址转换的含义</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_3-2-nat工作原理" class="sidebar-link">3.2 NAT工作原理</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#四、无类域间路由cidr与路由聚合" class="sidebar-link">四、无类域间路由CIDR与路由聚合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_4-1-cidr简介" class="sidebar-link">4.1 CIDR简介</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_4-2-cidr计算" class="sidebar-link">4.2 CIDR计算</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#五、dhcp协议-动态主机配置" class="sidebar-link">五、DHCP协议（动态主机配置）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#dhcp详细流程" class="sidebar-link">DHCP详细流程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#六、icmp协议" class="sidebar-link">六、ICMP协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_6-1-icmp协议的作用是什么" class="sidebar-link">6.1 ICMP协议的作用是什么</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#七、路由" class="sidebar-link">七、路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_7-1-路由算法是什么" class="sidebar-link">7.1 路由算法是什么</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_7-2-链路状态路由算法" class="sidebar-link">7.2 链路状态路由算法</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_7-3-距离向量路由算法" class="sidebar-link">7.3 距离向量路由算法</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_7-4-链路状态路由算法和向量路由算法对比" class="sidebar-link">7.4 链路状态路由算法和向量路由算法对比</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/116a3a/#八、路由器的转发" class="sidebar-link">八、路由器的转发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_8-1-最长前缀匹配简述" class="sidebar-link">8.1 最长前缀匹配简述</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_8-2-层次化路由" class="sidebar-link">8.2 层次化路由</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_8-3-rip路由信息协议" class="sidebar-link">8.3 RIP路由信息协议</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_8-4-ospf开放最短路径优先" class="sidebar-link">8.4 OSPF开放最短路径优先</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_8-5-bgp外部网关协议" class="sidebar-link">8.5 BGP外部网关协议</a></li><li class="sidebar-sub-header level3"><a href="/pages/116a3a/#_8-6-三种路由协议比较" class="sidebar-link">8.6 三种路由协议比较</a></li></ul></li></ul></li><li><a href="/pages/116a6a/" class="sidebar-link">数据链路层-以太网</a></li><li><a href="/pages/116k6a/" class="sidebar-link">物理层</a></li><li><a href="/pages/1q6k6r/" class="sidebar-link">习题</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3" title="分类" data-v-06225672>技术文档</a></li><li data-v-06225672><a href="/categories/?category=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C" title="分类" data-v-06225672>计算机网络</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/inannan423/inannan423.github.io" target="_blank" title="作者" class="beLink" data-v-06225672>Chengzihan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-06-12</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->网络层<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="一、网络层简介"><a href="#一、网络层简介" class="header-anchor">#</a> 一、网络层简介</h2> <div class="custom-block tip"><p class="custom-block-title">🔔 网络层的作用简述</p> <p>网络层介于传输层和数据链路层之间，<em>主要作用是实现两个不同网络系统之间的数据透明传送，具体包括路由选择，拥塞控制和网际互连等</em>。网络层负责在不同的网络之间(基于数据包的IP地址)尽力转发数据包，<strong>不负责丢包重传和接收顺序</strong>。</p></div> <p><em>网络层是网络与网络之间通信的最底层</em>，在数据从数据链路层向传输层进行数据传输的通信中，<strong>起到构建一个中间通信子网的作用</strong>。<em>不同网络有不同的网络层协议和地址规范，如果一个网络中的用户不能识别其他网络的通信协议和地址规范，那么这两个网络之间就不能进行数据通信</em>。</p> <div class="custom-block tip"><p class="custom-block-title">🔔</p> <p>就好比不同国家有着不同的交通法规，属于不同的交警系统管理，不允许他国车辆随便出入一样。不同网络也有不同的设计规范，属于不同的组织来管理，必须通过授权，并由专门的协议来负责网络间的通信。</p></div> <div class="custom-block tip"><p class="custom-block-title">🔔</p> <p><em>如果只是同一局域网内的各个计算机之间的通信，单靠物理层和数据链路层就可以建立通信链路完成用户间的数据通信</em>，<strong>但要扩大应用范围，连接不同的局域子网，就需要借助网络层处理各个网络子网的协议，从而进行计算机的网络互连</strong>，所以网络层在 TCP/IP 协议体系中叫网际互连层。</p></div> <h3 id="_1-1-数据链路层和网络层的区别"><a href="#_1-1-数据链路层和网络层的区别" class="header-anchor">#</a> 1.1 数据链路层和网络层的区别</h3> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h35hi1l9tnj30i30b2jvw.jpg" alt="image.png"></p> <h3 id="_1-2-网络互连使用的设备"><a href="#_1-2-网络互连使用的设备" class="header-anchor">#</a> 1.2 网络互连使用的设备</h3> <blockquote><p>（1）物理层使用的中间设备叫<strong>转发器</strong>（repeater）<br>
（2）数据链路层使用的中间设备叫做<strong>网桥或者桥接器</strong>（bridge）<br>
（3）网络层使用的中间设备叫做<strong>路由器</strong>（router）<br>
（4）在网络层以上使用的中间设备叫做<strong>网关</strong>（gateway）。用网关连接两个不兼容的系统需要在高层进行协议转换。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h35hlep70mj30dw064wgs.jpg" alt="image.png"></p></blockquote> <h3 id="_1-3-网络层的作用"><a href="#_1-3-网络层的作用" class="header-anchor">#</a> 1.3 网络层的作用</h3> <div class="custom-block note"><p class="custom-block-title">🌳</p> <p>简单来说，网络层的功能就是让我们的计算机在成千上万的计算机中，能够找到另一台计算机在哪里，是否属于同一个子网等。</p></div> <p>它的主要作用表现在下面的几个方面：<br>
（1）<em>屏蔽网络差异，提供透明传输</em></p> <blockquote><p>网络层就是为了解决不同网络有不同的规范要求的差异问题，寻找一个不同网络间都能共同遵守的网络通信规范，以便不同网络间能相互识别，并接受对方的网络请求。也就是一个中转站的作用，两个毫无交集的网络通过这个中转站来建立交集。</p></blockquote> <p>（2）<em>为网络间通信提供路由选择</em></p> <blockquote><p>路由选择是根据一定的原则和路由选择算法在多个结点的通信子网中选择一条到达目的节点的最佳路径的过程。确定路由选择的策略称为路由算法。在无连接的数据包服务中，网络节点要为每个数据包做出路由选择，即选择到达目的节点的最佳路线，而在面向连接的虚电路服务中，存在一条专门的逻辑线路，在建立连接时就已经确定了路有路径，无需额外选择。</p></blockquote> <p>（3）<em>拥塞控制</em></p> <blockquote><p>拥塞控制是为了避免网络传输路径中数据的传输延迟或死锁。数据链路层中的流量控制功能，是针对数据链路中点对点传输速率的控制，这里的拥塞控制是针对在网络层传输路径中的端到端传输效率的控制。主要采用预约缓冲区、许可证和分组丢弃等方式。</p></blockquote> <h2 id="二、ip协议"><a href="#二、ip协议" class="header-anchor">#</a> 二、IP协议</h2> <h3 id="_2-1-ip协议格式"><a href="#_2-1-ip协议格式" class="header-anchor">#</a> 2.1 IP协议格式</h3> <p><em>IP协议提供的服务为数据报服务，尽力而为的服务，数据单元为IP数据报</em>.<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3adkwepvij30s70fp784.jpg" alt="image.png"></p> <ol><li>4位<em>版本号</em>。标识当前的协议版本，比如ipv4.</li> <li>4位<em>首部长度</em>。用于标识数据报首部的长度。</li></ol> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>注意，由于IP协议共有5行，每行是32位，也就是4个字节，因此首部长度至少是20字节，4位的首部长度最高能标识的长度为15，显然是不够的，因此这里计算出的首部长度<em>必须乘以4才是真正的首部长度</em>。</p></div> <ol start="3"><li>8位<em>服务类型</em>（TOS），<em>前三位标识优先级</em>（已经弃用），接下来四位是最小延迟、最大吞吐、最高可能性、最小成本。剩下一位是保留位。1998年改为“区分服务”。只有当网络提供区分服务时才有效。</li> <li>16位<em>总长度</em>，标识ip数据包的最大长度位2^16，单位为字节。包含了ip的头部和ip数据报的有效负荷。</li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>可以计算得出IP分组的最大总长度为65535B（2^16-1)。最小的IP分组首部20B，IP可以封装的最大数据：65535-20=65515B。</p></div> <ol start="5"><li>16位<em>标识</em>。标识那些数据报是同一条数据。<strong>用于分片</strong>。</li> <li>3位<em>标志</em>，用于分片，见下方解释。</li></ol> <blockquote><p>第一位是保留位。<br>
第二位标识禁止分片。<br>
第三位标识分片是否结束。1表示后面还有分片，0表示后面没有分片。</p></blockquote> <ol start="7"><li>13位的<em>片位移</em>。表述这个数据报在同一个数据的哪个位置。</li> <li>8位<em>生存时间</em>，路由器经过的最大跳数。也就是说路由器能够转发这条数据的最大次数。</li></ol> <blockquote><p>每经历一个路由器转发TTL减一。TTL&gt;0表示还可以转发，TTL=0表示已经超时，丢弃这个ip数据。一般这个TTL是64.</p></blockquote> <ol start="9"><li><p>8位<em>协议</em>。记录上层协议这条数据需要<strong>交付给传输层哪个协议</strong>。它实现了IP协议的复用和分用。</p></li> <li><p>16位<em>首部校验</em>和。检测这个数据在传输过程中是否失真。对头部计算校验和时该字段全部置0，和的反码作为首部校验字段。<strong>首部校验和在每次转发的时候都需要重新计算</strong>。</p></li> <li><p>32位<em>源IP地址和32位目的IP地址</em>（网络层地址）。</p></li> <li><p>长度可变的选项字段（0~40B之间），可以携带安全信息、源选路径、时间戳等，实际上很少使用。</p></li> <li><p>填充域：长度可变（0~3B）<strong>目的是补齐整个首部，符合32位对齐，保证首部长度是4的倍数</strong>。</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>以上1-13部分称为IP分组的<em>头部</em>。</p></div> <ol start="14"><li>数据部分。</li></ol> <h3 id="_2-2-ip数据报的分片-fragmented"><a href="#_2-2-ip数据报的分片-fragmented" class="header-anchor">#</a> 2.2 IP数据报的分片（Fragmented）</h3> <p><strong>最大传输单元，MTU</strong>：链路层数据帧可以封装的数据上限。<br>
链路层帧：Head+Data+Tail，其中的Data就是封装的IP分组，MTU=Max（Data）。不同链路的MTU不一样。</p> <div class="custom-block warning"><p class="custom-block-title">MTU带来的问题</p> <p>如果数据报是从链路A传输到链路B，但是MTU-A&gt;MTU-B，很可能引发一个问题，也就是在A链路中数据报可以完整封装进链路层帧，但是B链路就不行了，所以就有了<strong>IP分片</strong>。<br>
如果这个IP分组是不允许分片的，那么这个IP分组将被丢弃。</p></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i7i4qtjej30il0hw43i.jpg" alt="image.png"><br>
IP分片到达目的地时由<strong>主机</strong>再进行<strong>重组</strong>，因此路由器只负责分片，不负责组装。
如果到达主机之后，分片没到全，那么全部分片将被丢弃。</p> <div class="custom-block note"><p class="custom-block-title">怎么标识一个IP分组呢？</p> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i7o9p9r5j30vx0f2q9d.jpg" alt="image.png"><br>
使用首部的<strong>标识ID</strong>、<strong>标识位</strong>、<strong>片偏移</strong>进行分辨。<br>
标识位占三位：<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i7pfhgx2j304m04jmx2.jpg" alt="image.png"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>DF:Dont Fragment。  //=1表示禁止分片（丢掉，并告诉发送方太大）、=0表示允许分片
MF:More Fragment。//=1表示这不是最后一片，=0表示这一片就是最后一片（也可能是根本没有分片）  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <p><strong>片偏移</strong><br>
占13位，一个IP分组片封装原IP分组的相对偏移量。它封装原Ip分组数据的相对偏移量。片偏移用来指定当前这个片应该被放置在原数据报的哪个位置，从而确保了组装的正确顺序。<br>
片偏移量<em>以8字节为单位</em>。</p></div> <div class="custom-block warning"><p class="custom-block-title">IP分片的过程</p> <ol><li><p>设原IP分组长度为L，待转发的链路MTU=M；</p></li> <li><p>若L&gt;M，且ＤＦ＝０，那么就要进行分片；</p></li> <li><p>分片时所有分片的标识位均<strong>复制</strong>原数据报的标识位。</p></li> <li><p>除了最后一个分片，前面的分片均分为MTU允许的最大分片。一个最大的分片可封装的数据是8的倍数，那么一个最大的分片可以封装的数据为：<br> <strong>d=下取整[(M-20)/8]×8</strong>。<br>
这里的M表示最大允许，20表示首部长度。</p></li> <li><p>那么需要的总片数为<strong>上取整[(L-20)/d]</strong></p></li> <li><p>每段的片偏移值为：<strong>Fi=(d/8)×(i-1)</strong>,1&lt;=i&lt;=n,n为片数，可以看出第1片的偏移数为0。</p></li> <li><p>每片的总长度字段：最后一片为<strong>L-(n-1)d</strong>，其他片为<strong>d+20</strong>。</p></li> <li><p>MF取值除了最后一位取0外其他全部取0.</p></li></ol></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i8f1mv9bj31z418ggzv.jpg" alt="fc161595d5b97f0626051c1c4bd75c4.jpg"><br>
图中，如果1500改为1504或1503呢？实际上，也是一样的。</p> <h3 id="_2-3-ip编址"><a href="#_2-3-ip编址" class="header-anchor">#</a> 2.3 IP编址</h3> <p>源地址和目的地址用于表明编址。<br> <strong>接口（interface）</strong>：主机/路由器与物理链路的链接。用于实现网络层功能，路由器通常有多个接口。主机通常有两个接口。<br>
交换器、WIFI等都在数据链路层，因此不用对其编址。</p> <h4 id="_2-3-1-ip子网"><a href="#_2-3-1-ip子网" class="header-anchor">#</a> 2.3.1 IP子网</h4> <p>使用32比特的二进制编号。
例如：11011111 00000001 00000001 00000001=223.1.1.1（为方便识别而转化为点分十进制）<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i8pb00shj30i70iqq8g.jpg" alt="image.png"><br>
IP地址和每个接口关联。</p> <div class="custom-block tip"><p class="custom-block-title">采取IP子网策略（Subnets）</p> <p>将IP地址分为网络号（NetID）和主机号（HostID）。在同一个区域网络中的IP地址的<strong>网络号一定相同，主机号一定不同</strong>。这个区域的网络叫<strong>IP子网</strong>。在这个网络中，所有的设备都不跨越路由器。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i8x5qua8j30yo0p0wsb.jpg" alt="image.png"></p></div> <details class="custom-block details"><summary>下图有几个子网</summary> <p>查看图中有几个不同的XXX.XXX.XXX，或者看被路由器分成几个部分，因此下图中有<strong>六个</strong>。
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i907b73ej31z418g4bz.jpg" alt="984d3de9a2505036960e82553189c32.jpg"><br>
中间三个IP子网可以分IP地址也可以不用。</p></details> <h3 id="_2-4-ip地址分类"><a href="#_2-4-ip地址分类" class="header-anchor">#</a> 2.4 IP地址分类</h3> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3ae7msddbj30rb0glaf7.jpg" alt="image.png">
IP地址根据<strong>网络号和主机号</strong>来分，<em>分为A、B、C三类</em>及<strong>特殊地址D、E</strong>。全0和全1的都保留不用。</p> <table><thead><tr><th style="text-align:left;">类别</th> <th style="text-align:left;">作用</th> <th style="text-align:left;">比例</th></tr></thead> <tbody><tr><td style="text-align:left;">A</td> <td style="text-align:left;">(0.0.0.0-127.255.255.255)（默认子网掩码：255.0.0.0或 0xFF000000）<strong>第一个字节为网络号，后三个字节为主机号</strong>。该类IP地址的最前面为“0”，所以地址的网络号取值于1~126之间。一般用于<em>大型网络</em>。</td> <td style="text-align:left;">50%</td></tr> <tr><td style="text-align:left;">B</td> <td style="text-align:left;">(128.0.0.0-191.255.255.255)（默认子网掩码：255.255.0.0或0xFFFF0000）<strong>前两个字节为网络号，后两个字节为主机号</strong>。该类IP地址的最前面为“10”，所以地址的网络号取值于128~191之间。一般用于<em>中等规模网络</em>。</td> <td style="text-align:left;">25%</td></tr> <tr><td style="text-align:left;">C</td> <td style="text-align:left;">(192.0.0.0-223.255.255.255)（子网掩码：255.255.255.0或 0xFFFFFF00）<strong>前三个字节为网络号，最后一个字节为主机号</strong>。该类IP地址的最前面为“110”，所以地址的网络号取值于192~223之间。一般用于<em>小型网络</em>。</td> <td style="text-align:left;">12.5%</td></tr> <tr><td style="text-align:left;">D</td> <td style="text-align:left;">是多播地址。不再区分网络号主机号。该类IP地址的最前面为“1110”，<strong>所以地址的网络号取值于224~239之间</strong>。一般用于<em>多路广播用户</em>[1]  。</td> <td style="text-align:left;">6.25%</td></tr> <tr><td style="text-align:left;">E</td> <td style="text-align:left;">是保留地址。不再区分网络号主机号。该类IP地址的最前面为“1111”，所以地址的网络号取值于240~255之间。</td> <td style="text-align:left;">6.25%</td></tr></tbody></table> <p>A类地址：网络位8位，主机位24位。<strong>可容纳主机数：2的24次方减2个</strong>，可以划分的子网数：为2的22次方，由于每个网络都存在两个不可用的地址（网络地址和广播地址），所以要想划分的子网可用，最小的子网应该留2味主机位，在此最小的网络中的可用地址数十2个，2的2次方减2，这种网络是现在多数小型企业用的联网方式（点到点网络），一个地址在自己的外网，另一个地址是运营上设备上的。<br>
B类地址:按上述说法，网络位和主机位都是16位，<strong>所以可容纳主机数是2的16次方减2</strong>，子网数为2的14次方。<br>
C类地址：网络位24位主机位8位，<strong>容纳主机数位2的8次方减2</strong>=254（这就是为什么咱们使用C类地址，比如192.168.1.网络地址的设置范围是从1到254了，因为网络地址1.0和广播地址1.255不可用），子网数位2的6次方。</p> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i9rch6bhj30zm0nqqa2.jpg" alt="image.png"></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在一个网段中都会有一个网络号的和广播号，即 192.0.0.0 ~ 192.0.0.255<br>
网络号：主机号全为0的ip地址，就为该网段中的网络号<br>
广播号：主机号中全为1的ip地址，就为该网段中的广播号<br>
127.0.0.1 ：本地回环网卡地址（通常用来测试自己机器的网络连通性）<br>
0.0.0.0：代表本地所有的网卡地址</p></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3kkxh96cdj30zk0k0te2.jpg" alt="image.png"></p> <h3 id="_2-5-特殊地址-广播地址、环回地址"><a href="#_2-5-特殊地址-广播地址、环回地址" class="header-anchor">#</a> 2.5 特殊地址（广播地址、环回地址）</h3> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i9sqckxdj30xy0ooaqm.jpg" alt="image.png"></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>本网内广播地址：255.255.255.255<br>
直接网络地址：网络号为特定值，主机号为全0.<br>
本地测试环回地址：网络号为127，主机号<strong>不为</strong>全0或者全1的的任何数。<br> <strong>私有地址</strong>：<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3i9ylehnkj30y60lyn4k.jpg" alt="image.png">
C类，例如我们学校的某些网站。是企业私有地址。</p></div> <hr> <h3 id="_2-6-子网划分"><a href="#_2-6-子网划分" class="header-anchor">#</a> 2.6 子网划分</h3> <p>实际上，上述的有类地址，并不灵活。所以将IP地址划分为<strong>网络号（NetID）、子网号（SubID）、主机号（HostID）</strong>。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3icu2cemvj30wa0ncn4c.jpg" alt="image.png"><br>
这些子网（上述四个）将用浏览器联系起来。<br>
如何确定是否划分了子网？使用<strong>子网掩码</strong>。</p> <h4 id="_2-6-1-子网掩码"><a href="#_2-6-1-子网掩码" class="header-anchor">#</a> 2.6.1 子网掩码</h4> <p>子网掩码形如IP地址，占32位，<strong>使用点分十进制表示</strong>。<br>
NetID、SubID全部取1。<br>
HostID全部取0。<br>
例如：<br>
A网络默认子网掩码： 255.0.0.0<br>
B网络默认子网掩码： 255.255.0.0<br>
C网络默认子网掩码： 255.255.255.0<br>
借用了主机3比特划分子网的子网B的子网掩码： 255.255.224.0 （11111111.11111111.<strong>111</strong>00000.00000000）<br> <strong>子网地址+子网掩码-》确定子网大小</strong> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3ifohph7kj30pc0m7n53.jpg" alt="image.png"></p> <div class="custom-block tip"><p class="custom-block-title">例子</p> <p>子网201.2.3.0，子网掩码为255.255.255.0，被划分为4个等长的子网（等长，256/4=64）：</p> <ol><li><p>201.2.3.0，255.255.255.192（借用主机8位中最高位的两个比特，因为要分成四个子网，0~3==00~11）</p></li> <li><p>201.2.3.64，255.255.255.192</p></li> <li><p>201.2.3.128，255.255.255.192</p></li> <li><p>201.2.3.192，255.255.255.192</p></li></ol></div> <p>路由器如何确定应该将IP分组转发到哪个子网上去呢？</p> <div class="custom-block note"><p class="custom-block-title">🌳</p> <p>将IP分组的目的IP地址与子网掩码按位与运算，提取子网地址。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3idg0aq2hj30xq0oqwtr.jpg" alt="image.png"><br>
地址范围为什么是~172.32.1.255？因为子网掩码借走了前面254.去掉<strong>主机域全0</strong>的和<strong>主机域全1</strong>的地址称为可分配地址范围。广播地址：主机域全1.</p></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3idpp48xoj30yx0rdh32.jpg" alt="image.png"></p> <h3 id="_2-7-环回地址"><a href="#_2-7-环回地址" class="header-anchor">#</a> 2.7 环回地址</h3> <p>帮助我们进行本地测试，既做客户端也做服务端。例如vue环境的run dev，就是在本机环回地址下做测试，进行热重载。
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3idtmbz5rj31hc0fnanr.jpg" alt="1655982239940.png"><br>
环回地址是一类特殊的IP地址， 127.0.0.1 —&gt; 127.255.255.254（去掉0和255） 的范围都是本地环回地址。环回地址(loopback)不离开主机的数据包(也就是说，这些数据包不会通过外部网络接口)。例如:127.0.0.1。需要注意的是，它是一个<strong>虚拟地址</strong>。是 IP地址中内部的一种。<br>
有一特殊的A类IP地址，网络地址是127，这类地址称作环回地址。但是我们经常使用的是127.0.0.1这个地址，且赋给它一个名字：<strong>localhost</strong>。</p> <h3 id="_2-8-ipv6"><a href="#_2-8-ipv6" class="header-anchor">#</a> 2.8 IPv6</h3> <p><strong>IPv6数据报格式</strong><br>
固定40B基本首部<br>
有拓展首部<br>
版本：总是6，指明了协议版本<br>
优先级：区分数据报的类别和优先级<br>
流标签：所有同属一个流的数据报有同样的流标签<br>
下一个首部：标示下一个拓展首部或上层协议首部<br>
跳数限制：相当于IPv4的TTL<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jnasbnkzj312e09k433.jpg" alt="image.png"><br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jnazjaafj31c20modrq.jpg" alt="image.png"></p> <hr> <p><strong>IPv6表示形式</strong><br>
不能用IPv4的点分十进制，改用冒号十六进制记法。<br>
其实就是’.‘号变成’:'号，十进制变成十六进制。<br>
压缩形式：全0的一组字节，直接用一个0即可。<br>
零压缩：一连串的全0字节组，可以直接用一对冒号代替。见图例<br>
FF05:【0:0:0:0:0:0】:B3 =&gt; FF05: :B3<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jnh0gyp4j30us0emaek.jpg" alt="image.png"><br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jnhdvmttj311c0jon3d.jpg" alt="image.png"></p> <hr> <p><strong>v4过渡到v6的方法</strong><br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jnidu6gbj31840i27fp.jpg" alt="image.png"></p> <h3 id="_2-9-ipv4-32位-和ipv6-128位-对比"><a href="#_2-9-ipv4-32位-和ipv6-128位-对比" class="header-anchor">#</a> 2.9 IPv4（32位）和IPv6（128位）对比</h3> <p><strong>v4使用32位格式，v6使用128位</strong><br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jnez4xptj31900g4tj2.jpg" alt="image.png"></p> <h2 id="三、网络地址转换-nat"><a href="#三、网络地址转换-nat" class="header-anchor">#</a> 三、网络地址转换 NAT</h2> <h3 id="_3-1-网络地址转换的含义"><a href="#_3-1-网络地址转换的含义" class="header-anchor">#</a> 3.1 网络地址转换的含义</h3> <p><strong>解决的问题</strong>：在专用网内部的一些主机本身就分配到了IP地址（专用IP地址），但是又想和互联网上的主机通信。<br> <strong>NAT路由器</strong>：专网和互联网中间的安装了NAT软件的桥梁路由器。它实现了本地主机在和外界通信时，使用NAT将本地地址全部转换为IP地址。</p> <h3 id="_3-2-nat工作原理"><a href="#_3-2-nat工作原理" class="header-anchor">#</a> 3.2 NAT工作原理</h3> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3cgkp868zj30oj09c76q.jpg" alt="image.png"><br>
在图中，<strong>专用网192.168.0.0内所有主机的IP地址都是本地IP地址192.168.x.x</strong>。NAT路由器<strong>至少要有一个</strong>全球IP地址，才能和互联网相连。图中表示出NAT路由器有一个全球IP地址172.38.1.5（当然，NAT路由器可以有多个全球IP地址）。<br> <em><strong>发送</strong></em>：NAT路由器收到从专用网内部的主机A发往互联网上主机B的IP数据报：<strong>源IP地址是192.168.0.3，而目的IP地址是213.18.2.4</strong>。NAT路由器把IP数据报的源IP地址192.168.0.3，<strong>转换为新的源IP地址（即NAT路由器的全球IP地址）172.38.1.5，然后转发出去</strong>。因此，主机B收到这个IP数据报时，<strong>以为A的IP地址是172.38.1.5</strong>。<br> <em><strong>接收</strong></em>：<strong>当B给A发送应答时，IP数据报的目的IP地址是NAT路由器的IP地址172.38.1.5</strong>。B并不知道A的专用地址192.168.0.3.实际上，即使知道了，也不能使用，因为互联网上的路由器都不转发目的地址是专用网本地IP地址的IP数据报。<strong>当NAT路由器收到互联网上的主机B发来的IP数据报时，还要进行一次IP地址的转换。通过NAT地址转换表，就可把IP数据报上的旧的目的P地址172.38.1.5，转换为新的目的P地址192.168.0.3</strong>（主机A真正的本地IP地址）。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>由此可见，<strong>当NAT路由器具有n个全球IP地址时</strong>，专用网内最多可以<strong>同时</strong>有n台主机接入到互联网。这样就可以使专用网内较多数量的主机，轮流使用NAT路由器有限数量的全球IP地址。</p></div> <p>但是，这种机制有明显的弊端，显然，也就是必须要内网主动发起才可以，但是如果外网希望主动和内网某个主机通信，这样NAT就不知道找谁了。<br> <strong>为了更加有效地利用NAT路由器上的全球IP地址，现在常用的NAT转换表把运输层的端口号也利用上</strong>。这样，就可以使多个拥有本地地址的主机，共用一个NAT路由器上的全球IP地址，<strong>因而可以同时和互联网上的不同主机进行通信</strong>。<em>使用端口号的NAT也叫做网络地址与端口号转换NAPT</em>，而不使用端口号的NAT就叫做传统的NAT。但在许多文献中并没有这样区分，而是不加区分地都使用NAT这个更加简洁的缩写词。下表说明了NAPT的地址转换机制。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3ch548ey0j30ui0640vd.jpg" alt="20200425184807390.png"><br>
从上表可以看出，在专用网内主机192.168.0.3向互联网发送IP数据报，其TCP端口号选择为30000。NAPT把源IP地址和TCP端口号都进行转换（如果使用UDP，则对UDP的端口号进行转换。原理是一样的）。另一台主机192.68.0.4也选择了同样的TCP端口号30000这纯属巧合（端口号仅在本主机中才有意义）。现在NAPT把专用网内不同的源IP地址都转换为同样的全球IP地址。但对源主机所采用的TCP端口号（不管相同或不同），则转换为不同的新的端口号。因此，当NAPT路由器收到从互联网发来的应答时，就可以从IP数据报的数据部分找出运输层的端口号，然后根据不同的目的端口号，从NAPT转换表中找到正确的目的主机。</p> <div class="custom-block tip"><p class="custom-block-title">NAT存在的意义</p> <p>它可以有效解决公网的地址不足的问题。</p></div> <h2 id="四、无类域间路由cidr与路由聚合"><a href="#四、无类域间路由cidr与路由聚合" class="header-anchor">#</a> 四、无类域间路由CIDR与路由聚合</h2> <h3 id="_4-1-cidr简介"><a href="#_4-1-cidr简介" class="header-anchor">#</a> 4.1 CIDR简介</h3> <p>无类域间路由（Classless InterDomain Routing，CIDR）<br>
消除A、B、C类的地址界限。<br>
NetID+SubID-&gt;Network Prefix<strong>网络前缀</strong>，可以任意长度。<br>
它融合了子网地址和子网掩码，方便子网划分。<br>
格式：{&lt;网络前缀&gt;，&lt;主机号&gt;}/前缀位数<br>
无类地址格式：a.b.c.d/x，其中x为前缀的长度。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3ig5ghtdvj30su0h9wpk.jpg" alt="image.png"></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>按照有类IP地址，这是一个典型的C类地址，但是C类地址是前24为为网络号，这里是23位。</p></div> <p>优点：</p> <ol><li>提高了IPv4地址空间效率。</li> <li>提高路由效率。解决了路由表项目过多过大的问题。</li></ol> <h3 id="_4-2-cidr计算"><a href="#_4-2-cidr计算" class="header-anchor">#</a> 4.2 CIDR计算</h3> <p>CIDR给出任何一个IP地址就相当于给出了一个CIDR地址块。这是由连续的IP地址组成的，所以CIDR实现了超网，实现了路由聚合。</p> <div class="custom-block tip"><p class="custom-block-title">实例</p> <p>例如：一个IP地址：128.14.35.7/20<br>
将其转化为2进制。蓝色部分是网络前缀。<br>
128.14.35.7/20=<strong>10000000 0000110 0010</strong>0011 00000111<br>
后面12位是主机号，因此，可以得到地址范围：<br> <strong>10000000 0000110 0010</strong>0000 00000000~<br> <strong>10000000 0000110 0010</strong>1111 11111111<br>
子网掩码是（前20位全1）：<strong>11111111 11111111 1111</strong>0000 00000000</p></div> <p>在CIDR表示法中也可以进行进一步的子网划分。</p> <p>例如：将128.14.35.0/20划分四个子网</p> <p>转换成二进制 128.14.35.0/20 = 10000000 00001110 00100011 00000000</p> <p>从主机位借走两位：</p> <p>10000000 00001110 0010<strong>00</strong>11 00000000 = 128.14.35.0/22</p> <p>10000000 00001110 0010<strong>01</strong>11 00000000 = 128.14.39.0/22</p> <p>10000000 00001110 0010<strong>10</strong>11 00000000 = 128.14.43.0/22</p> <p>10000000 00001110 0010<strong>11</strong>11 00000000 = 128.14.47.0/22</p> <h2 id="五、dhcp协议-动态主机配置"><a href="#五、dhcp协议-动态主机配置" class="header-anchor">#</a> 五、DHCP协议（动态主机配置）</h2> <p><strong>概念</strong>：DHCP的全称是Dynamic Host Configuration Protocol, 即<strong>动态主机配置协议</strong>， 它的特点是能够<strong>自动设置IP地址</strong>，并实行统一的管理。</p> <p>我们有两种为主机设置IP地址的方式：</p> <blockquote><p>管理员手动设置主机的IP地址<br>
通过DHCP自动设置IP地址</p></blockquote> <p>DHCP是一种<strong>即插即用的协议</strong>（plug-and-play protocol）。实际上，我们在生活中经常享受着DHCP带来的便利：我们有时会携带笔记本电脑或手机到公共场所里例如图书馆，并且通过WiFi<strong>连上一个陌生的子网</strong>，<strong>但是我们并没有做重新为主机配置IP地址的工作</strong>！<br>
在没有DCHP下，管理员来设置分配IP地址。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j02qin17j30f006rdh2.jpg" alt="1060770-20171029235528570-268748976.png"><br>
在DHCP支持下，自动分配IP地址。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j03veyvuj30fl07s0u2.jpg" alt="1060770-20171029235537211-1423949993.png"></p> <div class="custom-block tip"><p class="custom-block-title">DHCP工作流程</p> <ol><li>DHCP服务器管理着一个包含一系列IP地址的地址池,每当一台新的主机加入时，DHCP服务器就从其当前可用地址池中分配一个任意的地址给它</li> <li>每当一台主机离开的时候，其IP地址就被回收到地址池中<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j04zdax9j30c609q766.jpg" alt="1060770-20171029235601914-460592322.png"></li></ol></div> <p><strong>DHCP两个租约表</strong><br> <em>静态租约表</em>：对应一个静态租约存储文件，server运行时从文件中读取静态租约表。<br> <em>动态租约表</em>：对应一个周期存储文件，server周期性将租约表存进该文件，在程序开始时将会读取上次存放的租约表。（租约表记录了当前所有分配的租约，包括静态链接的。</p> <hr> <p><strong>DHCP的三种IP分配机制</strong></p> <ol><li><strong>自动分配方式</strong>（Automatic Allocation），DHCP服务器<strong>为主机指定一个永久性的IP地址</strong>，一旦DHCP客户端第一次成功从DHCP服务器端租用到IP地址后，<strong>就可以<em>永久性</em>的使用该地址</strong>。</li> <li><strong>动态分配方式</strong>（Dynamic Allocation），DHCP服务器<strong>给主机指定一个具有时间限制的IP地址</strong>，<strong>时间到期或主机明确表示放弃该地址时，该地址可以被其他主机使用</strong>。</li> <li><strong>手工分配方式</strong>（Manual Allocation），客户端的IP地址是由<strong>网络管理员指定的</strong>，<strong>DHCP服务器只是将指定的IP地址告诉客户端主机</strong>。
三种地址分配方式中，只有动态分配可以重复使用客户端不再需要的地址。<br>
DHCP封包在传输层（Transport Layer）是采用UDP协议，而当 Client传送封包给 Server时，采用的是<strong>UDP 67 Port</strong>，从 Server传送给 Client则是使用<strong>UDP 68 Port</strong>。</li></ol> <hr> <h3 id="dhcp详细流程"><a href="#dhcp详细流程" class="header-anchor">#</a> DHCP详细流程</h3> <p>1、DHCP Client<strong>以广播的方式</strong>（封包的源地址为0.0.0.0目的地址为255.255.255.255）发出DHCP Discover（<strong>在UDP 67端口</strong>）报文。</p> <hr> <p>2、<strong>所有的DHCP Server都能够接收到DHCP Client发送的DHCP Discover报文</strong>（也就是说子网内的DHCP服务器不止一个），<strong>所有的DHCP Server都会给出响应</strong>，向DHCP Client<strong>发送一个DHCP Offer报文</strong>。<br>
DHCP Offer报文中“<strong>Your(Client) IP Address</strong>”字段就是DHCP Server能够提供给DHCP Client使用的IP地址，且<strong>DHCP Server会将自己的IP地址放在“option”字段中以便DHCP Client区分不同的DHCP Server</strong>。DHCP Server在发出此报文后会存在一个<strong>已分配</strong>IP地址的纪录。</p> <hr> <p>3、DHCP Client<strong>只能处理其中的一个DHCP Offer报文</strong>，一般的原则是DHCP Client处理<strong>最先收到的</strong>DHCP Offer报文。DHCP Client会发出一个<strong>广播的DHCP Request</strong>报文，<strong>在选项字段中会加入选中的DHCP Server的IP地址和需要的IP地址</strong>。</p> <hr> <p>4、DHCP Server收到DHCP Request报文后，<strong>判断选项字段中的IP地址是否与自己的地址相同</strong>。如果不相同，DHCP Server不做任何处理<strong>只清除相应IP地址分配记录</strong>；如果相同，DHCP Server就会向DHCP Client<strong>响应一个DHCP ACK报文，并在选项字段中增加IP地址的使用租期信息</strong>。</p> <hr> <p>5、DHCP Client接收到DHCP ACK报文后，检查DHCP Server分配的IP地址<strong>是否能够使用</strong>。如果可以使用，则DHCP Client成功获得IP地址并根据IP地址使用租期自动启动续延过程；如果DHCP Client发现分配的IP地址<strong>已经被使用</strong>，则DHCP Client向DHCPServer<strong>发出DHCP Decline报文</strong>，通知DHCP Server禁用这个IP地址，然后DHCP Client开始新的地址申请过程。</p> <hr> <p>6、DHCP Client在成功获取IP地址后，<strong>随时可以通过发送DHCP Release报文释放自己的IP地址</strong>，DHCP Server收到DHCP Release报文后，<strong>会回收相应的IP地址并重新分配</strong>。
在使用租期<em><em>超过50%<strong>时刻处，DHCP Client会以</strong></em>单播形式</em><strong>向DHCP Server发送DHCPRequest报文来续租IP地址。如果DHCP Client成功收到DHCP Server发送的</strong>DHCP ACK报文**，<strong>则按相应时间延长IP地址租期</strong>；如果没有收到DHCP Server发送的DHCP ACK报文，则DHCP Client继续使用这个IP地址。
在使用租期<em><em>超过87.5%<strong>时刻处，DHCP Client会以</strong></em>广播形式</em><strong>向DHCP Server发送DHCPRequest报文来续租IP地址。如果DHCP Client成功收到DHCP Server发送的DHCP ACK报文，则按相应时间延长IP地址租期；如果没有收到DHCP Server发送的DHCP ACK报文，则DHCP Client继续使用这个IP地址，<strong>直到IP地址使用租期到期时</strong>，DHCP Client才会向DHCP Server发送DHCP Release报文来</strong>释放**这个IP地址，并开始新的IP地址申请过程。</p> <div class="custom-block tip"><p class="custom-block-title">一个类比</p> <p>当小明来到一个餐厅吃饭，小明必须寻找一个合适的座位。因此他就<strong>大喊</strong>（广播，UDP67）“大爷我来了！给我找个座位（IP）！”在现场那的所有的服务生（DHCP服务器）都会收到这个信息。服务生A告诉小明，请坐这个1号座位，服务生B告诉小明，请坐这个2号座位，服务生C让其坐3号座位，同时ABC三人这时都认为自己的座位有人坐了，但是小明只能选一个座位坐下，因此他选了<strong>最先</strong>听到的服务生A的话，选了1号座位，这时小明再次<strong>大喊</strong>“我坐了1号座位！”，服务生ABC都听到了这个消息，BC发现并不是自己的位子，那么就又认为这个2、3是空位了。A听到客人坐了自己的位置，那么他就在小明的<strong>耳边</strong>告诉小明：“好的（ACK）！你可以<strong>坐1 小时</strong>！”，小明听到后检查这个座位是不是真是空的，<strong>如果是</strong>，他就坐下来喝茶了，<strong>如果不是</strong>，他会把服务生A<strong>叫过来</strong>，大声斥责他说：“这已经有人坐了！”，然后小明重新大喊找座位。这里假定1确实是空的，小明坐了半小时后，小明把服务生叫过来说：“这个座位半小时后到期，我一会还要坐！”，如果服务生说：“好的！”，那就延长租期，如果小明耳聋没听到或者服务生嗓子哑了没说清楚，小明就<strong>不做理会</strong>，继续坐着，等到87.5%的时间之后，小明在餐厅里<strong>大喊</strong>，“这个座位快到期了！我要续租！”如果服务生说：“好的！”，那就延长租期，如果小明耳聋没听到或者服务生嗓子哑了没说清楚，小明就<strong>不做理会</strong>，继续坐着，直到时间快到了，他就叫服务生过来“我不坐了！”，然后重新大喊找座位。</p></div> <h2 id="六、icmp协议"><a href="#六、icmp协议" class="header-anchor">#</a> 六、ICMP协议</h2> <h3 id="_6-1-icmp协议的作用是什么"><a href="#_6-1-icmp协议的作用是什么" class="header-anchor">#</a> 6.1 ICMP协议的作用是什么</h3> <p><strong>Internet控制报文协议</strong>(Internet Control Message Protocol）<br>
CMP协议主要用来检测网络通信故障和实现链路追踪，最典型的应用就是PING和tracerooute。</p> <hr> <p>PING：
通过<strong>发送回送请求报文和回送回答报文</strong>来检测源主机到目的主机的<strong>链路是否有问题</strong>，<strong>目的地是否可达</strong>，以及通信的<strong>延迟情况</strong>。</p> <hr> <p>traceroute：
<strong>通过发送探测报文来获取链路地址信息</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">具体操作</p> <p>第一个探测报文TTL为1，到达第一个路由器时，TTL减1为0所以丢掉这个探测包，同时向源主机发回ICMP时间超过报文，这时源主机就获得了<strong>第一个路由器</strong>的IP地址。<br>
接着源主机发送第二个探测报文，TTL增1为2，到达第一个路由器TTL减1为1并转发探测包<strong>到第二个路由器</strong>，这时TTL减1为0，丢掉这个探测包并向源主机发回ICMP时间超过报文，源主机就获得了第二个路由器的IP地址。<br>
以此类推，<strong>直到探测报文到达traceroute的目的地</strong>，这时源主机就获得了到目的地的<strong>每一跳路由的IP地址</strong>。</p></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j2tpnlh1j314c0xanfz.jpg" alt="image.png"><br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j2u7ie6sj314s0w24cf.jpg" alt="image.png"></p> <hr> <h2 id="七、路由"><a href="#七、路由" class="header-anchor">#</a> 七、路由</h2> <p>路由器主要有<strong>路由</strong>和<strong>转发</strong>两大主要功能。<br>
路由器偶尔也称为网关。<br>
路由器有以下几种功能：</p> <blockquote><p>第一，网络互连，路由器支持各种 局域网和 广域网接口，主要用于互连局域网和广域网，实现不同网络互相通信；<br>
第二，数据处理，提供包括分组过滤、分组转发、优先级、复用、加密、压缩和 防火墙等功能；<br>
第三，网络管理，路由器提供包括配置管理、性能管理、容错管理和流量控制等功能。</p></blockquote> <h3 id="_7-1-路由算法是什么"><a href="#_7-1-路由算法是什么" class="header-anchor">#</a> 7.1 路由算法是什么</h3> <p>确定去往目的地的最佳路径。<br>
将网络抽象成图：每个节点是<strong>路由器</strong>，节点之间的连接线是<strong>链路</strong>。链路上的权值是通过链路的<strong>代价</strong>（费用）。当然，费用是越小越好的。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j31gj3t4j31c00u07bj.jpg" alt="36b33211a9f531f15d7c81547ae3af6.jpg"><br>
路由算法的目的是计算最小费用的路径是什么，也就是最短路径算法。
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j35prknwj316g0ve7rd.jpg" alt="image.png"></p> <hr> <h3 id="_7-2-链路状态路由算法"><a href="#_7-2-链路状态路由算法" class="header-anchor">#</a> 7.2 链路状态路由算法</h3> <p>基于迪杰斯特拉算法。<br>
链路状态路由算法要求每个路由器<strong>构造一个链路状态分组</strong>并广播给其他的路由器，每个路由器都会收到邻居路由器的信息。</p> <hr> <p>C(x,y)标识结点x到结点y的链路的<strong>费用</strong>，如果不直接相连则初始化为<strong>正无穷</strong>。<br>
D（v）标识从原目的到v结点路径的费用值。<br>
p（v）沿着源到v的前序结点。<br>
N标识已经找到最小费用路径的结点集合。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j3esb19fj30wz0jrgsa.jpg" alt="image.png"></p> <details class="custom-block details"><summary>迪杰斯特拉算法步骤演示</summary> <video width="680" height="480" controls="controls"><source src="https://6e61-nannan-1g1q4u2i02398ecf-1311679880.tcb.qcloud.la/Dijstra.mp4?sign=9eeb19de01c0d9d3c855bc53634f87a3&amp;t=1656038055" type="video/mp4">
  您的浏览器不支持 HTML5 video 标签。
</video></details> <p>由此可确定出u到各点的最短路径。并将其反映到最终的转发表。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j4tni0snj31z418gn8r.jpg" alt="7d5c7f84446b5c89dd0bf490f1a001f.jpg"></p> <div class="custom-block tip"><p class="custom-block-title">迪杰斯特拉算法出现的问题</p> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j4y9ash1j31cz0umx42.jpg" alt="image.png"></p></div> <h3 id="_7-3-距离向量路由算法"><a href="#_7-3-距离向量路由算法" class="header-anchor">#</a> 7.3 距离向量路由算法</h3> <p>基于Bellman-Ford方程（动态规划）<br>
d(xy)为x到y的最小开销（距离）<br> <strong>d(xy)=min{c(x,v)+d(vy)}</strong>，由邻居告知我它到达y的开销。</p> <hr> <p><strong>举例</strong>：<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j5gsa4hkj30dm09j40l.jpg" alt="image.png"><br>
显然，可以从图中得到u的邻居到z的距离：d(vz)=5,d(xz)=3,d(wz)=3<br>
那么根据B-F方程：<br>
d(uz)=min{c(uv)+d(vz),c(ux)+d(xz),c(uw)+d(wz)}=min{2+5,1+3,5+3}=4；故而使用x作为下一跳。<br>
因此u并不需要直到整个拓扑分组就能进行规划。</p> <hr> <p><strong>算法过程</strong><br>
对每个节点x：
（1）<strong>在每个节点建立自己的距离向量表并初始化</strong>。<br>
（2）在每个节点<strong>将自己维护的距离向量表向其邻居节点转发</strong>。<br>
（3）每个节点收到邻居节点发送的距离向量表以后基于新的信息采用方程来<strong>更新自己的距离向量表</strong>。<br>
（4）<strong>当自己的距离向量表发生变化时，将新的距离向量表发送给自己的邻居节点</strong>，如果与以前的向量表相同则不向其邻居节点转发，直到每个节点的距离向量表达到稳定为止。</p> <p>假设图中只有三个节点，它们两两相连：<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3j6plc7pxj30d705nmy0.jpg" alt="cb47905beb554cfca600ce6c4dc3425e.png"><br>
上图为x节点的选路表。<br>
节点x选路表中：<br>
行：该节点的距离向量Dx和其邻居的距离向量Dv；<br>
列：所有目的节点。<br>
在初始化时由于每个节点只知道本路由器相连的链路费用，因此只有到相邻节点的最低路径费用有值，其余全部为无穷大，为对应的链路费用值。如下图<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3ja8akmipj307604xweg.jpg" alt="c85ce5b6380d428f9e1f3c788ef0afb2.png"><br>
当每个节点完成自己的距离向量表后，会不断的向自己的邻居节点发送这个距离向量表。<br>
每个节点收到邻居新的距离向量表后，会使用B-F公式更新自己的距离向量。若距离向量发生变化将新的距离向量通知给邻居。<br>
当距离向量不在变化，则算法终止。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3ja92wr06j30ul0l778f.jpg" alt="29e941a69c4c4d18ad686765e3ffacc5.png"></p> <div class="custom-block tip"><p class="custom-block-title">图解</p> <p>x、y、z三个节点向其邻居发送了自己的向量表之后，x节点收到了来自y节点和z节点的距离向量分别是2、0、1和7、1、0。<strong>分别将这两个向量放在第二行和第三行的第一列中</strong>。然后利用收到的新的信息来更新自己的距离向量。首先<strong>更新x节点到y节点</strong>的最低路径费用。根据B-F方程可是x节点到y节点最低路径费用为2，因此保持不变，<strong>x节点到z节点的最低路径费用可进一步减小为3即x节点先到y节点再到z节点</strong>。经过上述修改后x的向量表如第一行第二列所示。x节点新的距离向量与以前的发生了变化，因此x节点会将新的距离向量向其邻居节点y和z发送。<strong>依次类推，每个节点都不断更新自己的距离向量，直到不在发送变化为止</strong>。<strong>例如第二行第二列这里的y节点重新计算距离向量后发现这里的距离向量没有发生变化仍然是201，因此不再向其邻居节点发送</strong>。<br>
我们观察到多次从邻居接受更新距离向量、重新计算选路表项、并向邻居发送更新通知的过程，一直持续到没有更新报文发出为止；算法进入静止状态，直到某个链路费用发生改变为止。</p></div> <h3 id="_7-4-链路状态路由算法和向量路由算法对比"><a href="#_7-4-链路状态路由算法和向量路由算法对比" class="header-anchor">#</a> 7.4 链路状态路由算法和向量路由算法对比</h3> <p><strong>消息复杂度</strong><br>
链路状态路由算法（LS）：<strong>需要知道每条链路的费用</strong>，需发送O（nE）个报文；<strong>当一条链路的费用发生变化时，必须通知所有节点</strong>。<br>
距离向量路由算法（DV）：迭代时，<strong>仅在两个直接相连邻居之间交换报文</strong>；当链路费用改变时，<strong>只有该链路相连的节点的最低费用路径发生改变时</strong>，才传播已经、改变的链路费用。</p> <hr> <p><strong>收敛速度</strong><br>
LS：需要O（nE）个报文和O（n^2）的搜寻。<br>
DV：收敛较慢。可能会遇到选路回环，或计数到无穷的问题。</p> <hr> <p><strong>健壮性：当一台路由器发生故障、操作错误或受到破坏时</strong><br>
LS：路由器<strong>向其连接的一条链路广播不正确费用，路由计算基本独立</strong>（仅计算自己的转发表），有一定健壮性。<br>
DV：<strong>一个节点可向任意或所有目的节点发布其不正确的最低费用路径，一个节点的计算值会传递给它的邻居，并间接地传递给邻居的邻居</strong>，好消息传得快，坏消息传得慢！。</p> <hr> <p>参考文章：<a href="https://blog.csdn.net/weixin_42374938/article/details/119349738" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_42374938/article/details/119349738<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="八、路由器的转发"><a href="#八、路由器的转发" class="header-anchor">#</a> 八、路由器的转发</h2> <p>网络层协议不再是端到端的服务了，而是一个在路由器间都需要的服务。<br> <strong>转发（forwarding）</strong>：将分组从路由器的输入端口转移到合适的输出端口。<br>
使用转发表。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jd9pzstkj30gb0cxn1n.jpg" alt="image.png"></p> <h3 id="_8-1-最长前缀匹配简述"><a href="#_8-1-最长前缀匹配简述" class="header-anchor">#</a> 8.1 最长前缀匹配简述</h3> <p>最长前缀匹配机制（Longest Prefix Match Algorithm）是目前行业内几乎所有的路由器都缺省采用的一种路由查询机制。<br>
当路由器收到一个IP数据包时，它会将数据包的目的IP地址与自己本地路由表中的所有路由表进行<strong>逐位</strong>（Bit-By-Bit）对比，直到找到匹配度最长的条目，这就是最长前缀匹配机制。</p> <hr> <p>在使用 CIDR 时，路由表的每个项目的组成 ，&lt;网络前缀，下一跳地址&gt;。在查找路由的时候可能会得到不止一个匹配的结果。<strong>此时应当从匹配结果中选择具有最长网络前缀的路由</strong>。因为<strong>网络前缀越长，其地址块就越小</strong>，路由就越具体。</p> <div class="custom-block tip"><p class="custom-block-title">举例</p> <p>已知：
收到的分组的目的地址 D = 206.0.71.128<br>
路由表中的项目：<br>
206.0.68.0/22<br>
206.0.71.128/25</p> <p>问：分组发往哪个地址？</p></div> <hr> <p><strong>求解思路</strong></p> <blockquote><p><strong>将子网掩码与目的地址相与</strong>，确定该目的地址<strong>是否属于该子网内部</strong>。<strong>如果两者都属于，则选择网络前缀（掩码）最长的</strong>。</p></blockquote> <p><strong>求解过程</strong></p> <ol><li>先用 D 和第一个(206.0.68.0/22)下一跳地址的子网掩码相与</li></ol> <p>206.0.71.128   and   11111111.11111111.11111100.00000000(22位1的子网掩码)</p> <p>结果:<br>
206.0.01000100.0   也就是   206.0.68.0<br>
说明匹配。</p> <ol start="2"><li>再用 D 和第二个下一跳地址的子网掩码相与</li></ol> <p>206.0.71.128   and   11111111.11111111.11111111.10000000<br>
结果是<br>
也是206.0.71.128<br>
也匹配。<br> <em>这个时候由于两个子网都匹配，选择最长的网络前缀匹配，也就是  206.0.71.128</em></p> <h3 id="_8-2-层次化路由"><a href="#_8-2-层次化路由" class="header-anchor">#</a> 8.2 层次化路由</h3> <p><strong>背景</strong>：将大规模的网络构成图的形式过于理想化，通过链路状态路由等算法进行计算的路由表几乎无法存储。<br>
将某个区域内的路由器聚合在一起，称为<strong>自治系统</strong>（AS，autonomous system），在同一个自治系统内可以采取某种路由算法，对于上层<strong>自治系统之间</strong>也可以进行某种路由算法。</p> <hr> <p><strong>网关路由器（Gateway Router）</strong>：位于自治系统边缘，与其他自治系统交换信息。</p> <hr> <p>下图展示一个互联的自治系统：<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jitaiz77j31h00upary.jpg" alt="f42c4ba0009d9124e915ff473bcb02c.png"><br>
如果AS3有信息需要交给AS2，在上图中，就必须由AS1进行<strong>转交</strong>！<br>
AS1必须学习哪些网络可以通过AS2到达，哪些可以通过AS1到达。这些学习到的东西必须传播给AS1内部的路由器。
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jixqzq7uj318s0x21j0.jpg" alt="image.png"></p> <h3 id="_8-3-rip路由信息协议"><a href="#_8-3-rip路由信息协议" class="header-anchor">#</a> 8.3 RIP路由信息协议</h3> <div class="custom-block tip"><p class="custom-block-title">路由信息协议基本概述</p> <ol><li>RIP（Routing Information Protocol）路由信息协议，服务于<strong>内部网关</strong>协议IGP。</li> <li>使用的是距离<strong>矢量路由算法</strong>（DV算法）</li> <li><strong>使用传输层用户数据报</strong>UDP协议进行传送，端口520</li> <li>按固定的时间间隔交换路由信息，时间默认30s</li> <li>RIP协议中“距离”定义为“跳数”，每经过一个路由，跳数加1.</li> <li>为了防止无穷计数问题，<strong>最大跳数是15</strong>，16相当于不可达。</li></ol></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jj53ym48j30f604mgmg.jpg" alt="2021051919244733.png"></p> <hr> <p><strong>RIP详细描述</strong></p> <ol><li><p>简单，适用于小型同类网络</p></li> <li><p>通过广播UDP报文来交换路由信息，是<strong>传输层封装</strong>的协议，应当属于应用层，但是<strong>本质属于网络层</strong>。</p></li> <li><p>RIP简单的将网络的距离定义为“跳数”。路由器与路由器直连的距离都是1，每经过一个路由器，跳数就加1，RIP认为一个好的路由就是它通过的路由器的数目少。RIP限定了无穷大等于16跳。所以实际上RIP能支持的网络规模很小，在一条路由上<strong>若超过了15台路由器</strong>，那么RIP就认为<strong>不可达</strong>。</p></li> <li><p>RIP<strong>每30秒</strong>发送一次路由信息更新。这样作的目的是防止路由器出现故障后无法通告给邻居导致无法保证路由的有效性。</p></li> <li><p>由于RIP协议是基于距离向量算法的协议，所以RIP具有<strong>好消息传的快，坏消息传的慢的特点</strong>。可能导致路由回路。</p></li></ol> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jm6oxzh5j30sv0mfdsm.jpg" alt="image.png"></p> <hr> <h3 id="_8-4-ospf开放最短路径优先"><a href="#_8-4-ospf开放最短路径优先" class="header-anchor">#</a> 8.4 OSPF开放最短路径优先</h3> <p><strong>OSPF协议</strong><br>
全称：Open Shortest Path First，开放最短路径优先<br>
采用<strong>链路状态路由算法</strong>，迪杰斯特拉。<br>
LS分组扩散，每个路由器构造完整的AS拓扑图。<br>
OSPF通告中每个入口对应一个邻居。<br>
OSPF通告在整个AS范围进行泛红：OSPF报文直接封装到IP数据报之中。<br> <strong>IS-IS协议和OSPF协议很像</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">OSPF协议的优势</p> <p>安全：所有OSPF报文可以被认证（预防恶意入侵）。<br>
允许使用<strong>多条</strong>相同费用的路径（RIP只能一条），实现负载均衡。<br>
支持单播路由与多播路由。<br>
OSPF可以划分两层区域分为主干区和局部区。引入了区边界路由器实现了区域之间的通信，它既是主干区的路由器也是其他区的路由器。
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jlmndsqwj31as0wawz1.jpg" alt="image.png"></p></div> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jm66gesqj30uy139trw.jpg" alt="image.png"></p> <hr> <h3 id="_8-5-bgp外部网关协议"><a href="#_8-5-bgp外部网关协议" class="header-anchor">#</a> 8.5 BGP外部网关协议</h3> <p>前面介绍了RIP协议、OSPF协议，<strong>它们是内部网关协议</strong>，本文介绍<strong>外部网关协议，Border Gateway Protocol</strong>，即<strong>AS之间使用协议即BGP协议</strong>。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jlxned0xj30o5080q69.jpg" alt="18464438-5e786ecd92e03bcb.webp"><br>
由于互联网规模太过庞大，所以AS之间进行路由十分困难，因此，外部网关协议BGP <strong>只能是力求寻找一条能够达到目的网络且比较好的路由</strong>，而并<strong>非最佳</strong>路由。BGP采用了<strong>路径向量路由选择协议</strong>。</p> <hr> <p><img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jlz8yq3sj30pr0da445.jpg" alt="18464438-29af88b8d4e45c21.webp"><br> <em><strong>BGP协议的特点</strong></em></p> <ol><li>主要和边界路由器进行通信，也就是AS边界的BDP发言人。</li> <li>用于交换可达性信息。</li> <li>每次发生变化时就要更新有变化的部分。</li> <li>BGP支持<strong>无分类域间路由选择CIDR</strong>，因此BGP路由表中包括目的网络前缀，下一跳路由器，以及达到该目的网络所要经过的自治系统序列。</li> <li>一个BGP发言人与其他自治系统中的BGP发言人要交换信息，首先需要建立<strong>TCP连接</strong>（端口号179），然后在此连接上交换BGP报文以建立BGP会话，利用BGP会话交换路由信息。所以，<strong>BGP协议是应用层协议</strong>，借助TCP传送。
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jm2s6qlhj30i407f0te.jpg" alt="18464438-f232d1b1d9ddee41.webp"></li></ol> <hr> <p>BGP协议总结：
<img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jm5fkow5j30pb0notix.jpg" alt="18464438-0f55e1b8727dab34.webp"></p> <h3 id="_8-6-三种路由协议比较"><a href="#_8-6-三种路由协议比较" class="header-anchor">#</a> 8.6 三种路由协议比较</h3> <p>RIP和OSPF还有ISIS协议属于<strong>域内路由协议</strong>，BGP属于<strong>域间路由协议</strong>。<br> <img src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3jm4aw8r7j30lr0e778s.jpg" alt="18464438-5c07407e87869ba0.webp"></p> <p><a href="https://www.jianshu.com/p/bcd899ba09df" target="_blank" rel="noopener noreferrer">感谢路由协议原作者<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/inannan423/inannan423.github.io/edit/main/docs/技术文档/03.计算机网络/09.网络层.md" target="_blank" rel="noopener noreferrer">Edit it</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=%E8%AE%A1%E7%BD%91" title="标签">#计网</a><a href="/tags/?tag=%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" title="标签">#计算机基础知识</a></div> <div class="last-updated"><span class="prefix">Last updated :</span> <span class="time">2022/09/21, 07:23:03</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/39f7b8/" class="prev">运输层-TCP连接建立过程</a></span> <span class="next"><a href="/pages/116a6a/">数据链路层-以太网</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/@pages/about.html"><div>
            
            <!----></div></a> <span class="date"></span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/719b0c/"><div>
            Easyx图形界面构建
            <!----></div></a> <span class="date">07-05</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/719b0t/"><div>
            Driver Test
            <!----></div></a> <span class="date">07-05</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:605031236@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/inannan423" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://www.npmjs.com/" title="NPM" target="_blank" class="iconfont icon-npm"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span><br><img style="margin:0 auto;height:50px;" src="/img/minilogo.png"/><br>飞行编码喷气机 | Made with ❤ by Chengzihan.<br>MIT LICENSE | Build with <a href="https://vuepress.vuejs.org/zh/">vuepress<a>.<br>Powered by <a href="https://www.netlify.com/">Netlify</a>.</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><div></div><div></div></div></div>
    <script src="/assets/js/app.5066a133.js" defer></script><script src="/assets/js/2.ae42d6f2.js" defer></script><script src="/assets/js/61.85ea6254.js" defer></script><script src="/assets/js/10.eb81c37d.js" defer></script>
  </body>
</html>
