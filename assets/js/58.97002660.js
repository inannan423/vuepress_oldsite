(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{427:function(t,_,v){"use strict";v.r(_);var e=v(1),a=Object(e.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"前言-传输层和应用层的关系"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#前言-传输层和应用层的关系"}},[t._v("#")]),t._v(" 前言 传输层和应用层的关系")]),t._v(" "),v("p",[t._v("做下面的比喻："),v("br"),t._v(" "),v("em",[t._v("应用层报文")]),t._v("——发信信封上的字符"),v("br"),t._v(" "),v("em",[t._v("进程")]),t._v("——收信方和发信方"),v("br"),t._v(" "),v("em",[t._v("主机")]),t._v("——两个家庭"),v("br"),t._v(" "),v("em",[t._v("传输层协议")]),t._v("——两个家庭专门负责收发信的人"),v("br"),t._v(" "),v("em",[t._v("网络成协议")]),t._v("——邮政服务（逻辑通信提供者）")]),t._v(" "),v("h2",{attrs:{id:"一、传输层的功能"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、传输层的功能"}},[t._v("#")]),t._v(" 一、传输层的功能")]),t._v(" "),v("p",[t._v("传输层为运行在"),v("em",[t._v("不同主机")]),t._v("的应用提供"),v("strong",[t._v("逻辑通信")]),t._v("。对网络层的服务进行增强（如数据排序，加密等，"),v("strong",[t._v("有些服务是不可增强的，如带宽、延迟")]),t._v("）")]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("🔔 传输层协议运行在端系统")]),t._v(" "),v("p",[t._v("发送方：将应用层的报文"),v("em",[t._v("分成")]),t._v("报文段，"),v("strong",[t._v("然后传递给网络层")]),t._v("。"),v("br"),t._v("\n接受方：将报文段"),v("em",[t._v("重组")]),t._v("为报文，"),v("strong",[t._v("然后传递给应用层")]),t._v("。")])]),t._v(" "),v("h2",{attrs:{id:"二、常见的应用使用的端口号总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、常见的应用使用的端口号总结"}},[t._v("#")]),t._v(" 二、常见的应用使用的端口号总结")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("应用")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("端口号")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("HTTP")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("80/8080/3128/8081/9098")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("FTP")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("21/22")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("Telent（远程登录）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("23")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("HTTPS")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("443（TCP） 443（UDP）")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SMTP")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("25（TCP）")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("POP3")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("110（TCP）")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SSH（安全登录）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("22（TCP）")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("SOCKS（代理服务器）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1080（TCP）")])])])]),t._v(" "),v("h2",{attrs:{id:"三、传输层协议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、传输层协议"}},[t._v("#")]),t._v(" 三、传输层协议")]),t._v(" "),v("h3",{attrs:{id:"_3-1-tcp协议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-tcp协议"}},[t._v("#")]),t._v(" 3.1 TCP协议")]),t._v(" "),v("h4",{attrs:{id:"_3-1-1-tcp简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-tcp简介"}},[t._v("#")]),t._v(" 3.1.1 TCP简介")]),t._v(" "),v("p",[t._v("TCP全称："),v("em",[t._v("传输控制协议")]),t._v("-"),v("strong",[t._v("Transmission Control Protocol")]),t._v("，是一种面向连接的协议，它是一个"),v("em",[t._v("面向连接")]),t._v("的通信协议。TCP协议是基于"),v("strong",[t._v("IP协议")]),t._v("的。"),v("br"),t._v(" "),v("em",[t._v("面向连接")]),t._v("："),v("strong",[t._v("两个应用程序相互发数据之前必须先握手")]),t._v("。"),v("br"),t._v("\n提供"),v("em",[t._v("可靠的数据传输、拥塞控制、流量控制")]),t._v("。")]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("🔔 全双工")]),t._v(" "),v("p",[t._v("TCP提供"),v("em",[t._v("全双工服务")]),t._v("（Full-duplex service) ，当两个进程A和B建立起TCP连接后，那么应用层数据在从A流向B的同时也从B流向A。")])]),t._v(" "),v("p",[v("em",[t._v("点对点")]),t._v("：TCP是单个发送方和单个接收方的协议。"),v("em",[t._v("多播（即一次发送多个点接收）是无法实现的")]),t._v("。"),v("br"),t._v(" "),v("img",{attrs:{src:"https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32be5jf8sj30ns0chjt2.jpg",alt:"image.png"}})]),t._v(" "),v("div",{staticClass:"custom-block warning"},[v("p",{staticClass:"custom-block-title"},[t._v("⚠ 两个常见的名词")]),t._v(" "),v("p",[t._v("①最大报文段长度（Maximum Segment Size,MSS）:该术语很容易被混淆，它其实指的是报文段里应用数据的最大长度，而不是包括TCP首部的TCP报文段的最大长度。")]),t._v(" "),v("p",[t._v("②最大传输单元（Maximun Transmission Unit,MTU）:指的是最大链路层帧长度，即应用数据+TCP首部+IP首部。")])]),t._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[t._v("🌳 TCP连接的组成")]),t._v(" "),v("p",[v("em",[t._v("TCP连接的组成包括：两台主机上的缓存、变量和与进程相连的套接字")]),t._v("而两台主机之间的网络元素（路由器、交换机和中继器）没有为该连接分配任何变量。")])]),t._v(" "),v("h4",{attrs:{id:"_3-1-2-tcp的报文结构"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-tcp的报文结构"}},[t._v("#")]),t._v(" 3.1.2 TCP的报文结构")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("结构名称")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("大小")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("作用")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("源端口号")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("16比特")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("存储发送方端口号")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("目标端口号")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("16比特")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("存储接收方端口号")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("序号Seq")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("32比特")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("报文段的首字节在字节流的编号")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("确认号Ack")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("32比特")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("期望从另一方收到的下一个字节的序号")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("接收窗口")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("16比特")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("愿意接收的字节数量")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("校验和")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("16比特")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("校验传输的数据的准确性")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("应用层数据")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("长度不确定")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("传输的数据")])])])]),t._v(" "),v("p",[v("em",[t._v("源端口号和目标端口号")])]),t._v(" "),v("blockquote",[v("p",[t._v("被用于多路复用来自上层应用的数据/多路分解送到上层应用")])]),t._v(" "),v("p",[v("em",[t._v("32比特的序号字段和32比特的确认字段")])]),t._v(" "),v("blockquote",[v("p",[t._v("这些字段被TCP发送方和接收方用来实现可靠数据传输服务。")])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("序号字段的作用")]),t._v(" "),v("p",[t._v("序号是"),v("strong",[t._v("可靠传输")]),t._v("的关键因素。"),v("strong",[t._v("TCP将要传输的"),v("em",[t._v("每个字节")]),t._v("都进行了编号")]),t._v("，序号是本报文段发送的数据组的"),v("strong",[t._v("第一个字节的编号")]),t._v("，序号可以保证传输信息的有效性。"),v("strong",[t._v("比如：一个报文段的序号为300，此报文段数据部分共有100字节，则下一个报文段的序号为401")]),t._v("。")])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("确认号字段的作用")]),t._v(" "),v("p",[v("strong",[t._v("每一个ACK对应这一个确认号")]),t._v("，它指明"),v("strong",[t._v("下一个期待收到的字节序号")]),t._v("，表明该序号之前的所有数据已经"),v("strong",[t._v("正确无误的收到")]),t._v("。"),v("em",[t._v("确认号只有当ACK标志为1时才有效")]),t._v("。比如建立连接时，SYN报文的ACK标志位为0。")])]),t._v(" "),v("p",[v("em",[t._v("16比特接收窗口字段")])]),t._v(" "),v("blockquote",[v("p",[t._v("该字段用于指示接收方愿意接收的字节数量，用于流量控制")])]),t._v(" "),v("p",[v("em",[t._v("4比特的首部长度字段")])]),t._v(" "),v("blockquote",[v("p",[t._v("指示以32比特的字为单位的TCP首部长度，表示该TCP头部有多少个32位bit("),v("strong",[t._v("有多少个4字节")]),t._v(")，所以TCP头部大长度是15 * 4 = 60。根据该部分可以将TCP报头和有效载荷分离。"),v("strong",[t._v("TCP报文默认大小为20个字节")]),t._v("。")])]),t._v(" "),v("p",[v("em",[t._v("可选与变长的选项字段")])]),t._v(" "),v("blockquote",[v("p",[t._v("该字段用于发送方与接收方协调最大报文长度（MSS）时，或在高速网络环境下用作窗口调节因子时使用。")])]),t._v(" "),v("p",[v("em",[t._v("6比特的标志字段")])]),t._v(" "),v("blockquote",[v("p",[t._v("ACK（确认反馈），RST、SYN、FIN（用于连接的建立和拆除），【PSH（指示接收方应立即将数据交给上层），URG（报文里存在着被发送端上层设为紧急的数据，紧急数据的最后一个字节由一个16比特的紧急数据指针指出）】在实践中，PSH和URG并没有使用。")])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),v("p",[t._v("URG:它为了标志紧急指针是否有效。"),v("br"),t._v("\nACK：标识确认号是否有效。"),v("br"),t._v("\nPSH:提示接收端应用程序立即将接收缓冲区的数据拿走。"),v("br"),t._v("\nRST：它是为了处理异常连接的， 告诉连接不一致的一方，我们的连接还没有建立好， 要求对方重新建立连接。我们把携带RST标识的称为复位报文段。"),v("br"),t._v("\nSYN: 请求建立连接; 我们把携带SYN标识的称为同步报文段。"),v("br"),t._v("\nFIN:通知对方, 本端要关闭连接了, 我们称携带FIN标识的为结束报文段。")])]),t._v(" "),v("p",[v("em",[t._v("16位的紧急指针")])]),t._v(" "),v("blockquote",[v("p",[t._v("按序到达是TCP协议保证可靠性的一种机制，但是也存在一些报文想"),v("strong",[t._v("优先被处理")]),t._v("，这时就可以设置紧急指针，指向该报文即可，同时将紧急指针有效位置位1。")])]),t._v(" "),v("p",[v("em",[t._v("16位校验和")])]),t._v(" "),v("blockquote",[v("p",[t._v("发送端填充，CRC校验。如果接收端校验不通过， 则认为数据有问题(此处的检验和不光包含TCP首部也包含TCP数据部分)。")])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32brs41v5j30s80iy406.jpg",alt:"image.png"}})]),t._v(" "),v("details",{staticClass:"custom-block details"},[v("summary",[t._v("英文详图")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32bt2e6k9j30go07xt9s.jpg",alt:"image.png"}})])]),t._v(" "),v("h4",{attrs:{id:"_3-1-3-tcp特性解读"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-tcp特性解读"}},[t._v("#")]),t._v(" 3.1.3 TCP特性解读")]),t._v(" "),v("p",[v("em",[t._v("1.可靠数据传输")])]),t._v(" "),v("blockquote",[v("p",[t._v("TCP在IP提供的不可靠服务的基础上建立了rdt。提供了累计确认和超时重传机制。允许乱序接收。")])]),t._v(" "),v("p",[v("em",[t._v("2.流量控制")])]),t._v(" "),v("blockquote",[v("p",[t._v("缓冲区："),v("em",[t._v("TCP往里面写数据，app从里面读数据")]),t._v("。接收方控制发送方，"),v("strong",[t._v("不让发送方发送的太多、太快")]),t._v("，以致于让接收方的缓冲区溢出。接收方在其向发送方的TCP报文段头部的rwnd字段“通告”其空闲缓存区大小。发送方根据rwnd字段控制发送数据的大小，保证接收方不会被淹没。")])]),t._v(" "),v("p",[v("em",[t._v("3.连接控制")])]),t._v(" "),v("blockquote",[v("p",[t._v("三次握手建立连接。详见下一篇文章。")])]),t._v(" "),v("hr"),t._v(" "),v("h3",{attrs:{id:"_3-2-udp协议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-udp协议"}},[t._v("#")]),t._v(" 3.2 UDP协议")]),t._v(" "),v("h3",{attrs:{id:"_3-2-1-udp协议简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-udp协议简介"}},[t._v("#")]),t._v(" 3.2.1 UDP协议简介")]),t._v(" "),v("p",[t._v("全称："),v("em",[t._v("用户数据报协议-User Datagram Protocol")]),t._v("，简称UDP，是一种无连接的数据传输协议。"),v("br"),t._v(" "),v("em",[t._v("无连接")]),t._v("：UDP发送端和接收端"),v("em",[t._v("没有握手")]),t._v("；"),v("em",[t._v("每个UDP报文段都被独立的处理")]),t._v("。"),v("br"),t._v(" "),v("em",[t._v("优点")]),t._v("：传输"),v("strong",[t._v("速度快")]),t._v("（无需握手、无拥塞和流量控制）、开销小（报文段的头部很小）"),v("br"),t._v(" "),v("em",[t._v("缺点")]),t._v("：可能丢失、可能"),v("strong",[t._v("乱序")]),v("br"),t._v(" "),v("em",[t._v("应用")]),t._v("：流媒体（要求速率，对丢失不敏感）、DNS")]),t._v(" "),v("h3",{attrs:{id:"_3-2-2-udp报文格式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-udp报文格式"}},[t._v("#")]),t._v(" 3.2.2 UDP报文格式")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32tjunjb7j30ym0cuwir.jpg",alt:"image.png"}}),v("br"),t._v(" "),v("em",[t._v("UDP首部由8个字节构成，每个字段都是两个字节")])]),t._v(" "),v("blockquote",[v("p",[t._v("1、源端口：源端口号，需要对方回信时选用，不需要时置0；"),v("br"),t._v("\n2、目标端口：目的端口号，在终点交付报文时需要用到；"),v("br"),t._v("\n3、头部长度：UDP的数据报长度（包含首部和数据），最小值为8字节（只有首部）；"),v("br"),t._v("\n4、校验和：检测UDP数据在传输中是否出错，"),v("strong",[t._v("有错则丢弃")]),t._v("。")])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("🔔 UDP校验")]),t._v(" "),v("p",[t._v("该字段可选，"),v("strong",[t._v("当源主机不想计算校验和，则置0")]),t._v("，当传输层从IP层收到UDP数据报时，根据首部中的目标端口，把UDP数据通过相应的端口交给应用进程。"),v("em",[t._v("若接收方UDP发现收到的报文中目的端口号不正确，就丢弃该报文")]),t._v("，由ICMP发送“"),v("em",[t._v("端口不可达")]),t._v("”报错给发送方。")]),t._v(" "),v("p",[t._v("在计算校验和时，"),v("em",[t._v("在UDP数据报前加12字节的伪首部")]),t._v("，并不是UDP真正的首部。"),v("strong",[t._v("只是在计算校验和时临时添加在UDP数据报的前面得到的临时数据报")]),t._v("，后校验临时数据报。"),v("strong",[t._v("伪首部既不向下传送，也不向上递交，仅仅为了计算校验和")]),t._v("。这样，即检查了UDP的数据报，又对IP数据报源IP地址和目标地址进行了校验。")])]),t._v(" "),v("details",{staticClass:"custom-block details"},[v("summary",[t._v("UDP数据报格式和伪首部图解")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32uq85ppzj30v40ojakj.jpg",alt:"image.png"}})])]),t._v(" "),v("h2",{attrs:{id:"四、拥塞控制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、拥塞控制"}},[t._v("#")]),t._v(" 四、拥塞控制")]),t._v(" "),v("p",[v("em",[t._v("拥塞")]),t._v("：大多数数据需要传输，超过了网络的处理能力。"),v("br"),t._v(" "),v("em",[t._v("拥塞的表现")]),t._v("：分组丢失（路由器缓冲区溢出）、分组延迟（在路由器中的排队延迟）")]),t._v(" "),v("h3",{attrs:{id:"_4-1-tcp拥塞控制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-tcp拥塞控制"}},[t._v("#")]),t._v(" 4.1 TCP拥塞控制")]),t._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[t._v("🌳 基本原理")]),t._v(" "),v("p",[v("em",[t._v("路由器不向主机发送拥塞相关的反馈信息")]),t._v("（路由器的负担较轻、符合网络核心简单的TCP/IP架构原则）"),v("br"),t._v(" "),v("strong",[t._v("端系统根据自身得到的消息，判断是否发生拥塞，从而采取动作")])])]),t._v(" "),v("p",[v("strong",[t._v("拥塞监测的方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("某个段超时了（丢失事件）：拥塞"),v("br"),t._v("\n超时时间到，某个段的确认没有来。"),v("br"),t._v("\n原因1：网络拥塞（某个路由器缓冲区没空间了，被丢弃）大概率"),v("br"),t._v("\n原因2：出错被丢弃了（各级错误，没有通过校验，被丢弃）小概率"),v("br"),t._v(" "),v("em",[t._v("一旦超时，就认为发生了拥塞，有一定误判，但是总体控制方向是对的")])])]),t._v(" "),v("h2",{attrs:{id:"五、tcp和udp的异同"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#五、tcp和udp的异同"}},[t._v("#")]),t._v(" 五、TCP和UDP的异同")]),t._v(" "),v("p",[v("strong",[t._v("相同点")]),t._v("：TCP和UDP都是在网络层，都是传输层协议，都能都是保护网络层的传输，双方的通信都需要开放端口。")]),t._v(" "),v("p",[v("strong",[t._v("不同点")]),t._v(":")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("\\")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[v("strong",[t._v("TCP")])]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[v("strong",[t._v("UDP")])])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("TCP的传输是"),v("em",[t._v("可靠传输")]),t._v("。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP的传输是"),v("em",[t._v("不可靠传输")]),t._v("。")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("TCP是"),v("em",[t._v("基于连接的协议")]),t._v("，在正式收发数据前，必须和对方建立可靠的连接。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP是和TCP相对应的协议，它是面向"),v("em",[t._v("非连接的协议")]),t._v("，它不与对方建立连接，而是"),v("em",[t._v("直接把数据包发送出去")])])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("TCP是一种"),v("em",[t._v("可靠的通信服务，负载相对而言比较大")]),t._v("，TCP采用套接字（socket）或者端口（port）来建立通信。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP是一种"),v("em",[t._v("不可靠的网络服务，负载比较")]),t._v("小。")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[v("em",[t._v("TCP和UDP结构不同")]),t._v("，TCP包括序号、确认信号、数据偏移、控制标志（通常说的URG、ACK、PSH、RST、SYN、FIN）、窗口、校验和、紧急指针、选项等信息。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP包含长度和校验和信息。")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("5")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("TCP提供超时重发，丢弃重复数据，检验数据，流量控制等功能，"),v("em",[t._v("保证数据能从一端传到另一端")]),t._v("。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP不提供可靠性，它只是把应用程序传给IP层的数据报发送出去，"),v("em",[t._v("但是并不能保证它们能到达目的地")]),t._v("。")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("6")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("TCP在发送数据包前在通信双方有一个"),v("em",[t._v("三次握手机制，确保双方准备好")]),t._v("，在传输数据包期间，TCP会根据链路中数据流量的大小来调节传送的速率，传输时如果发现有丢包，会有严格的重传机制，故而传输速度很慢。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP在传输数据报前不用在客户和服务器之间建立一个连接，且"),v("em",[t._v("没有超时重发等机制，故而传输速度很快")]),t._v("。")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("7")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[v("em",[t._v("TCP支持全双工和并发的TCP连接")]),t._v("，提供确认、重传与拥塞控制。")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("UDP适用于哪些系统"),v("em",[t._v("对性能的要求高于数据完整性的要求")]),t._v("，需要“简短快捷”的数据交换、需要多播和广播的应用环境。")])])])]),t._v(" "),v("h2",{attrs:{id:"六、多路复用和分用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#六、多路复用和分用"}},[t._v("#")]),t._v(" 六、多路复用和分用")]),t._v(" "),v("blockquote",[v("p",[t._v("由于一个主机上有多个进程，因此要进行多路复用和分用。如果某层的一个协议对应上层的多个协议/实体，就需要进行服用/分用。")])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("🔔 接收端进行多路分用")]),t._v(" "),v("p",[t._v("传输层根据头部信息将收到的报文交给正确的Socket（即不同的进程）。")])]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("🔔 发送端进行多路复用")]),t._v(" "),v("p",[t._v("从多个Socket接收数据，为每个数据封装头部信息，生成报文，交给网络层。")])]),t._v(" "),v("p",[v("em",[t._v("分用")]),t._v("：")]),t._v(" "),v("p",[t._v("主机接收到IP数据报(datagram)")]),t._v(" "),v("blockquote",[v("p",[t._v("每个数据报携带源IP地址、目的IP地址"),v("br"),t._v("\n每个数据报携带一个传输层的段(Segment）"),v("br"),t._v("\n每个段携带源端口号和目的端口号")])]),t._v(" "),v("p",[t._v("主机收到Segment之后，传输层协议提取IP地址和端口号信息，将Segment导向相应的Socket")]),t._v(" "),v("blockquote",[v("p",[t._v("TCP做更多处理")])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h33ht0kf8ij30f308pjvt.jpg",alt:"image.png"}}),v("br"),t._v(" "),v("a",{attrs:{href:"https://www.cnblogs.com/s1mmons/p/15792624.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("复用和分用"),v("OutboundLink")],1)])])}),[],!1,null,null,null);_.default=a.exports}}]);